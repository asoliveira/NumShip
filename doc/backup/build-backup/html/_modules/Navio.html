

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Navio &mdash; NumShip 1 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="NumShip 1 documentation" href="../index.html" />
    <link rel="up" title="Código do módulo" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navegação</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice Geral"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos do Python"
             >módulos</a> |</li>
        <li><a href="../index.html">NumShip 1 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Código do módulo</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Código fonte de Navio</h1><div class="highlight"><pre>
<span class="c"># -*- coding: utf-8 -*-</span>

<span class="c">#</span>
<span class="c">#This file is part of a program called NumShip</span>

<span class="c">#Copyright (C) 2011,2012  Alex Sandro Oliveira</span>

<span class="c">#NumShip is free software: you can redistribute it and/or modify</span>
<span class="c">#it under the terms of the GNU General Public License as published by</span>
<span class="c">#the Free Software Foundation, either version 3 of the License, or</span>
<span class="c">#(at your option) any later version.</span>

<span class="c">#This program is distributed in the hope that it will be useful,</span>
<span class="c">#but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c">#MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c">#GNU General Public License for more details.</span>

<span class="c">#You should have received a copy of the GNU General Public License</span>
<span class="c">#along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Algumas palavras teste </span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c">#imports</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">scipy</span> <span class="kn">as</span> <span class="nn">sp</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">linalg</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>

<span class="c">#Módulos criados</span>
<span class="kn">from</span> <span class="nn">Casco</span> <span class="kn">import</span>  <span class="o">*</span>
<span class="kn">from</span> <span class="nn">Leme</span> <span class="kn">import</span>  <span class="o">*</span>
<span class="kn">from</span> <span class="nn">Prop</span> <span class="kn">import</span> <span class="o">*</span>


<div class="viewcode-block" id="inte"><a class="viewcode-back" href="../Navio.html#Navio.inte">[documentos]</a><span class="k">class</span> <span class="nc">inte</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Classe que realiza a integração no tempo</span>
<span class="sd">  </span>
<span class="sd">  :version:0.0</span>
<span class="sd">  :author: Alex</span>
<span class="sd">  </span>
<span class="sd">  &quot;&quot;&quot;</span>
  
  
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
    
<div class="viewcode-block" id="inte.rk4"><a class="viewcode-back" href="../Navio.html#Navio.inte.rk4">[documentos]</a>  <span class="k">def</span> <span class="nf">rk4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">t0</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">par</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Integrador runge-kutta</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">k1</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t0</span><span class="p">,</span> <span class="n">par</span><span class="p">)</span>
    <span class="n">k2</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mf">1.</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="n">dt</span><span class="o">*</span><span class="n">k1</span><span class="p">,</span> <span class="n">t0</span> <span class="o">+</span> <span class="mf">1.</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="n">dt</span><span class="p">,</span> <span class="n">par</span><span class="p">)</span>
    <span class="n">k3</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mf">1.</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="n">dt</span><span class="o">*</span><span class="n">k2</span><span class="p">,</span> <span class="n">t0</span> <span class="o">+</span> <span class="mf">1.</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="n">dt</span><span class="p">,</span> <span class="n">par</span><span class="p">)</span>
    <span class="n">k4</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">dt</span><span class="o">*</span><span class="n">k3</span><span class="p">,</span> <span class="n">t0</span> <span class="o">+</span> <span class="n">dt</span><span class="p">,</span> <span class="n">par</span><span class="p">)</span>
  
    <span class="n">xt</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mf">1.</span><span class="o">/</span><span class="mi">6</span><span class="o">*</span><span class="p">(</span><span class="n">k1</span><span class="o">+</span> <span class="mf">2.</span><span class="o">*</span><span class="n">k2</span><span class="o">+</span> <span class="mf">2.</span><span class="o">*</span><span class="n">k3</span><span class="o">+</span> <span class="n">k4</span><span class="p">)</span><span class="o">*</span><span class="n">dt</span>
  
    <span class="k">return</span> <span class="n">xt</span>
  </div>
<div class="viewcode-block" id="inte.euler"><a class="viewcode-back" href="../Navio.html#Navio.inte.euler">[documentos]</a>  <span class="k">def</span> <span class="nf">euler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">t0</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">par</span><span class="o">=</span> <span class="bp">None</span> <span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>      
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t0</span><span class="p">,</span> <span class="n">par</span><span class="p">)</span><span class="o">*</span><span class="n">dt</span>

  
  </div></div>
<div class="viewcode-block" id="navio"><a class="viewcode-back" href="../Navio.html#Navio.navio">[documentos]</a><span class="k">class</span> <span class="nc">navio</span><span class="p">:</span>
  <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Classe de navios</span>
<span class="sd">  &quot;&quot;&quot;</span>
  
  <span class="n">tipo</span> <span class="o">=</span> <span class="s">&#39;Escolhido de acordo com self.Tipo&#39;</span>
  <span class="n">data</span> <span class="o">=</span> <span class="s">&#39;10-11-2010&#39;</span>
  <span class="n">autor</span> <span class="o">=</span> <span class="s">&#39;Alex&#39;</span>
  
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">DicionarioDerivadas</span><span class="p">,</span> <span class="n">Nome</span> <span class="o">=</span> <span class="s">&#39;Teste&#39;</span><span class="p">,</span> <span class="n">Tipo</span> <span class="o">=</span> <span class="s">&#39;TP&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;&quot;</span>
<span class="sd">    Construtor do navio</span>
<span class="sd">    __________________________</span>
<span class="sd">    Variáveis de entrada:</span>
<span class="sd">    </span>
<span class="sd">    Nome (string)-- Nome do Navio. Não possui relevância;</span>
<span class="sd">    Tipo (&#39;TP&#39;)-- Tipo de modelo numérico adotado para a construção do</span>
<span class="sd">Leme</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nome</span> <span class="o">=</span> <span class="n">Nome</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vel</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">acel</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dic</span> <span class="o">=</span> <span class="n">DicionarioDerivadas</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tipo</span> <span class="o">=</span> <span class="n">Tipo</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">integrador</span> <span class="o">=</span> <span class="n">inte</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">uc</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;unom&#39;</span><span class="p">])</span>
    
    <span class="k">if</span> <span class="n">Tipo</span> <span class="o">==</span> <span class="s">&#39;TP&#39;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">leme</span> <span class="o">=</span> <span class="n">lemeTris</span><span class="p">(</span><span class="n">DicionarioDerivadas</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">casco</span> <span class="o">=</span> <span class="n">cascoTris</span><span class="p">(</span><span class="n">DicionarioDerivadas</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">prop</span> <span class="o">=</span> <span class="n">prop</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">Tipo</span> <span class="o">==</span> <span class="s">&#39;MARAD&#39;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">leme</span> <span class="o">=</span> <span class="n">lemeMarAd</span><span class="p">(</span><span class="n">DicionarioDerivadas</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">casco</span> <span class="o">=</span> <span class="n">cascoMarAd</span><span class="p">(</span><span class="n">DicionarioDerivadas</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">prop</span> <span class="o">=</span> <span class="n">propMarAd</span><span class="p">(</span><span class="n">DicionarioDerivadas</span><span class="p">)</span>




<div class="viewcode-block" id="navio.MostraVel"><a class="viewcode-back" href="../Navio.html#Navio.navio.MostraVel">[documentos]</a>  <span class="k">def</span> <span class="nf">MostraVel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retorna a Velocidade da embarcação</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vel</span>
    </div>
<div class="viewcode-block" id="navio.MostraAcel"><a class="viewcode-back" href="../Navio.html#Navio.navio.MostraAcel">[documentos]</a>  <span class="k">def</span> <span class="nf">MostraAcel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retorna a aceleração da embarcação</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">acel</span>
  </div>
<div class="viewcode-block" id="navio.MostraLeme"><a class="viewcode-back" href="../Navio.html#Navio.navio.MostraLeme">[documentos]</a>  <span class="k">def</span> <span class="nf">MostraLeme</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retorna o leme em rad da embarcação</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">leme</span><span class="o">.</span><span class="n">MostraLeme</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="navio.MostraLemeCom"><a class="viewcode-back" href="../Navio.html#Navio.navio.MostraLemeCom">[documentos]</a>  <span class="k">def</span> <span class="nf">MostraLemeCom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retorna o leme em rad da embarcação</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">leme</span><span class="o">.</span><span class="n">MostraLemeCom</span><span class="p">()</span>
  </div>
<div class="viewcode-block" id="navio.MostraPos"><a class="viewcode-back" href="../Navio.html#Navio.navio.MostraPos">[documentos]</a>  <span class="k">def</span> <span class="nf">MostraPos</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retorna a posição da embarcação</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span>
</div>
<div class="viewcode-block" id="navio.MostraRotCom"><a class="viewcode-back" href="../Navio.html#Navio.navio.MostraRotCom">[documentos]</a>  <span class="k">def</span> <span class="nf">MostraRotCom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retorna a rotação comandada</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prop</span><span class="o">.</span><span class="n">MostraRotCom</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="navio.MostraRot"><a class="viewcode-back" href="../Navio.html#Navio.navio.MostraRot">[documentos]</a>  <span class="k">def</span> <span class="nf">MostraRot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retorna a rotação</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prop</span><span class="o">.</span><span class="n">MostraRot</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="navio.MostraVelCom"><a class="viewcode-back" href="../Navio.html#Navio.navio.MostraVelCom">[documentos]</a>  <span class="k">def</span> <span class="nf">MostraVelCom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retorna a velocidade comandada</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">uc</span>
    </div>
<div class="viewcode-block" id="navio.MudaVelCom"><a class="viewcode-back" href="../Navio.html#Navio.navio.MudaVelCom">[documentos]</a>  <span class="k">def</span> <span class="nf">MudaVelCom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Muda a velocidade comandada</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">uc</span>  <span class="o">=</span> <span class="n">uc</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">prop</span><span class="o">.</span><span class="n">MudaVelCom</span><span class="p">(</span><span class="n">uc</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="navio.MudaLemeCom"><a class="viewcode-back" href="../Navio.html#Navio.navio.MudaLemeCom">[documentos]</a>  <span class="k">def</span> <span class="nf">MudaLemeCom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">AngLeme</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Muda o leme comandado da embarcação</span>
<span class="sd">    __________________________</span>
<span class="sd">    Variáveis de entrada:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="n">AngLeme</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">leme</span><span class="o">.</span><span class="n">MudaLemeCom</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>        

    </div>
<div class="viewcode-block" id="navio.MudaVel"><a class="viewcode-back" href="../Navio.html#Navio.navio.MudaVel">[documentos]</a>  <span class="k">def</span> <span class="nf">MudaVel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Velocidade</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Muda a velocidade da embarcação</span>
<span class="sd">    __________________________</span>
<span class="sd">    Variáveis de entrada:</span>
<span class="sd">    Velocidade -- velocidade (m/s)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="n">Velocidade</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    
    <span class="bp">self</span><span class="o">.</span><span class="n">vel</span> <span class="o">=</span> <span class="n">temp</span>        
    <span class="bp">self</span><span class="o">.</span><span class="n">casco</span><span class="o">.</span><span class="n">MudaVel</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">leme</span><span class="o">.</span><span class="n">MudaVel</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">prop</span><span class="o">.</span><span class="n">MudaVel</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="navio.MudaPos"><a class="viewcode-back" href="../Navio.html#Navio.navio.MudaPos">[documentos]</a>  <span class="k">def</span> <span class="nf">MudaPos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Posicao</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Muda a posição da embarcação </span>
<span class="sd">    __________________________</span>
<span class="sd">    Variáveis de entrada:</span>
<span class="sd">    Posição -- posição (m)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="n">Posicao</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">temp</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">casco</span><span class="o">.</span><span class="n">MudaPos</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">leme</span><span class="o">.</span><span class="n">MudaPos</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">prop</span><span class="o">.</span><span class="n">MudaPos</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="navio.MudaRotCom"><a class="viewcode-back" href="../Navio.html#Navio.navio.MudaRotCom">[documentos]</a>  <span class="k">def</span> <span class="nf">MudaRotCom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Rot</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Muda a rotação Comandada da embarcação</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">prop</span><span class="o">.</span><span class="n">MudaRotCom</span><span class="p">(</span><span class="n">Rot</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="navio.CalcFx"><a class="viewcode-back" href="../Navio.html#Navio.navio.CalcFx">[documentos]</a>  <span class="k">def</span> <span class="nf">CalcFx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calcula a força em Surge   </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;m&#39;</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;rho&#39;</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;lpp&#39;</span><span class="p">]</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> 
    <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">xg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;xg&#39;</span><span class="p">]</span>
    <span class="n">zg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;zg&#39;</span><span class="p">]</span>
    
    <span class="n">cori</span> <span class="o">=</span> <span class="n">m</span><span class="o">*</span><span class="p">(</span><span class="n">v</span><span class="o">*</span><span class="n">r</span> <span class="o">+</span> <span class="n">xg</span><span class="o">*</span><span class="p">(</span><span class="n">r</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">-</span>  <span class="n">zg</span><span class="o">*</span><span class="n">p</span><span class="o">*</span><span class="n">r</span><span class="p">)</span> 
    
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;MARAD&#39;</span><span class="p">:</span>
      <span class="n">saida</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">casco</span><span class="o">.</span><span class="n">Fx</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">prop</span><span class="o">.</span><span class="n">Fx</span><span class="p">()</span> <span class="o">+</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">leme</span><span class="o">.</span><span class="n">Fx</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraRot</span><span class="p">(),</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">MostraVelCom</span><span class="p">()</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="n">cori</span><span class="p">)</span> 
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;TP&#39;</span><span class="p">:</span>
      <span class="n">saida</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">casco</span><span class="o">.</span><span class="n">Fx</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">leme</span><span class="o">.</span><span class="n">Fx</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">prop</span><span class="o">.</span><span class="n">Fx</span><span class="p">()</span> <span class="o">+</span> <span class="n">cori</span>
  
    <span class="k">return</span>    <span class="n">saida</span>
</div>
<div class="viewcode-block" id="navio.CalcFy"><a class="viewcode-back" href="../Navio.html#Navio.navio.CalcFy">[documentos]</a>  <span class="k">def</span> <span class="nf">CalcFy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calcula a força em Sway</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;m&#39;</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;rho&#39;</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;lpp&#39;</span><span class="p">]</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> 
    <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">xg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;xg&#39;</span><span class="p">]</span>
    <span class="n">zg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;zg&#39;</span><span class="p">]</span>
    
    <span class="n">cori</span> <span class="o">=</span> <span class="o">-</span><span class="n">m</span><span class="o">*</span><span class="n">u</span><span class="o">*</span><span class="n">r</span>
  
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;MARAD&#39;</span><span class="p">:</span>
      <span class="n">saida</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">casco</span><span class="o">.</span><span class="n">Fy</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">leme</span><span class="o">.</span><span class="n">Fy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraRot</span><span class="p">())</span> <span class="o">+</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">prop</span><span class="o">.</span><span class="n">Fy</span><span class="p">()</span> <span class="o">+</span> <span class="n">cori</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;TP&#39;</span><span class="p">:</span>
      <span class="n">saida</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">casco</span><span class="o">.</span><span class="n">Fy</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">leme</span><span class="o">.</span><span class="n">Fy</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">prop</span><span class="o">.</span><span class="n">Fy</span><span class="p">()</span> <span class="o">+</span> <span class="n">cori</span>
  
    <span class="k">return</span> <span class="n">saida</span>
</div>
<div class="viewcode-block" id="navio.CalcK"><a class="viewcode-back" href="../Navio.html#Navio.navio.CalcK">[documentos]</a>  <span class="k">def</span> <span class="nf">CalcK</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calcula o momento de Roll</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;m&#39;</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;rho&#39;</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;lpp&#39;</span><span class="p">]</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> 
    <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">xg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;xg&#39;</span><span class="p">]</span>
    <span class="n">zg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;zg&#39;</span><span class="p">]</span>
    
    <span class="n">cori</span> <span class="o">=</span> <span class="n">m</span><span class="o">*</span><span class="n">zg</span><span class="o">*</span><span class="n">u</span><span class="o">*</span><span class="n">r</span>
  
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;MARAD&#39;</span><span class="p">:</span>
      <span class="n">saida</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">casco</span><span class="o">.</span><span class="n">K</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">leme</span><span class="o">.</span><span class="n">K</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraRot</span><span class="p">())</span> <span class="o">+</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">prop</span><span class="o">.</span><span class="n">K</span><span class="p">()</span> <span class="o">+</span> <span class="n">cori</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;TP&#39;</span><span class="p">:</span>
      <span class="n">saida</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">casco</span><span class="o">.</span><span class="n">K</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">leme</span><span class="o">.</span><span class="n">K</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">prop</span><span class="o">.</span><span class="n">K</span><span class="p">()</span> <span class="o">+</span> <span class="n">cori</span>
  
    <span class="k">return</span>    <span class="n">saida</span>

  </div>
<div class="viewcode-block" id="navio.CalcN"><a class="viewcode-back" href="../Navio.html#Navio.navio.CalcN">[documentos]</a>  <span class="k">def</span> <span class="nf">CalcN</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calcula o momento de  Yaw</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;m&#39;</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;rho&#39;</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;lpp&#39;</span><span class="p">]</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">xg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;xg&#39;</span><span class="p">]</span>
    <span class="n">zg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;zg&#39;</span><span class="p">]</span>
    
    <span class="n">cori</span> <span class="o">=</span> <span class="o">-</span><span class="n">m</span><span class="o">*</span><span class="n">xg</span><span class="o">*</span><span class="n">u</span><span class="o">*</span><span class="n">r</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;MARAD&#39;</span><span class="p">:</span>
      <span class="n">saida</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">casco</span><span class="o">.</span><span class="n">N</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">leme</span><span class="o">.</span><span class="n">N</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraRot</span><span class="p">())</span> <span class="o">+</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">prop</span><span class="o">.</span><span class="n">N</span><span class="p">()</span> <span class="o">+</span> <span class="n">cori</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;TP&#39;</span><span class="p">:</span>
      <span class="n">saida</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">casco</span><span class="o">.</span><span class="n">N</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">leme</span><span class="o">.</span><span class="n">N</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">prop</span><span class="o">.</span><span class="n">N</span><span class="p">()</span> <span class="o">+</span> <span class="n">cori</span>
  
    <span class="k">return</span> <span class="n">saida</span>
    </div>
<div class="viewcode-block" id="navio.VetF"><a class="viewcode-back" href="../Navio.html#Navio.navio.VetF">[documentos]</a>  <span class="k">def</span> <span class="nf">VetF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Vetor de forças</span>
<span class="sd">    _________________________</span>
<span class="sd">    Variáveis de entrada:</span>
<span class="sd">    p --  tupla</span>
<span class="sd">    p[0] (integer)-- Graus de liberdade </span>
<span class="sd">    p[1] (tupla)-- Com pesos</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">p</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">GrausDeLib</span> <span class="o">=</span><span class="mi">4</span>
      <span class="n">peso</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
      <span class="n">GrausDeLib</span> <span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
      <span class="n">peso</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
      <span class="n">GrausDeLib</span> <span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
      <span class="n">peso</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
      
    <span class="k">if</span> <span class="n">peso</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
      <span class="k">if</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">saida</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">CalcFx</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">CalcFy</span><span class="p">(),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">CalcK</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">CalcN</span><span class="p">()])</span>  
      <span class="k">elif</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">saida</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">CalcFx</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">CalcFy</span><span class="p">(),</span>
<span class="bp">self</span><span class="o">.</span><span class="n">CalcN</span><span class="p">()])</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">lemearq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraLeme</span><span class="p">()</span>
      <span class="n">velarq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()</span>
      <span class="n">uc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVelCom</span><span class="p">()</span>
      
      <span class="c">####################</span>
      
      <span class="bp">self</span><span class="o">.</span><span class="n">leme</span><span class="o">.</span><span class="n">MudaLemeDir</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mf">0.</span><span class="p">))</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaVelCom</span><span class="p">(</span><span class="n">velarq</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c">#condição eta=1</span>
      
<span class="c">##            ####################</span>
<span class="c">##            Aquilo que depende somente de u</span>
<span class="c">##</span>
<span class="c">##            ####################</span>
      
      <span class="n">veltemp</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
      <span class="n">veltemp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">velarq</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaVel</span><span class="p">(</span><span class="n">veltemp</span><span class="p">)</span>
      
      <span class="n">fu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">VetF</span><span class="p">((</span><span class="n">GrausDeLib</span><span class="p">,</span> <span class="p">))</span>

      <span class="c">####################</span>
      <span class="n">veltemp</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
      <span class="n">veltemp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">velarq</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
      <span class="n">veltemp</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">velarq</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaVel</span><span class="p">(</span><span class="n">veltemp</span><span class="p">)</span>
      
      <span class="c"># leme = 0 e eta = 1</span>

      <span class="n">fbeta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">VetF</span><span class="p">((</span><span class="n">GrausDeLib</span><span class="p">,</span> <span class="p">))</span> <span class="o">-</span> <span class="n">fu</span>
      <span class="n">it</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="n">fbeta1</span> <span class="o">=</span> <span class="n">fbeta</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

      <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">peso</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>

        <span class="n">fbeta</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">arg</span><span class="o">*</span> <span class="n">fbeta</span><span class="p">[</span><span class="n">it</span><span class="p">]</span>

        <span class="n">it</span> <span class="o">+=</span><span class="mi">1</span> 
      <span class="c">####################</span>

      
      
      <span class="n">veltemp</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
      <span class="n">veltemp</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">velarq</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
      <span class="n">veltemp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">velarq</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>            
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaVel</span><span class="p">(</span><span class="n">veltemp</span><span class="p">)</span>
      
      <span class="n">fr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">VetF</span><span class="p">((</span><span class="n">GrausDeLib</span><span class="p">,</span> <span class="p">))</span> <span class="o">-</span> <span class="n">fu</span>
      <span class="n">fr1</span> <span class="o">=</span> <span class="n">fr</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

      <span class="n">it</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">peso</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">fr</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">arg</span><span class="o">*</span> <span class="n">fr</span><span class="p">[</span><span class="n">it</span><span class="p">]</span>
        <span class="n">it</span> <span class="o">+=</span><span class="mi">1</span>                

      <span class="c">####################</span>
      
      
      
      <span class="bp">self</span><span class="o">.</span><span class="n">leme</span><span class="o">.</span><span class="n">MudaLemeDir</span><span class="p">(</span><span class="n">lemearq</span><span class="p">)</span>
      <span class="n">veltemp</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
      <span class="n">veltemp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">velarq</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaVel</span><span class="p">(</span><span class="n">veltemp</span><span class="p">)</span>
      
      <span class="n">fleme</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">VetF</span><span class="p">((</span><span class="n">GrausDeLib</span><span class="p">,</span> <span class="p">))</span>  <span class="o">-</span> <span class="n">fu</span>
      
      <span class="n">fleme1</span> <span class="o">=</span> <span class="n">fleme</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

      <span class="n">it</span> <span class="o">=</span> <span class="mi">0</span>            
      <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">peso</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
        <span class="n">fleme</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">arg</span><span class="o">*</span> <span class="n">fleme</span><span class="p">[</span><span class="n">it</span><span class="p">]</span>
        <span class="n">it</span> <span class="o">+=</span><span class="mi">1</span>     
      

      <span class="c">####################</span>
      
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaVel</span><span class="p">(</span><span class="n">velarq</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaVelCom</span><span class="p">(</span><span class="n">uc</span><span class="p">)</span>
      
      <span class="n">fbetarl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">VetF</span><span class="p">((</span><span class="n">GrausDeLib</span><span class="p">,</span> <span class="p">))</span> <span class="o">-</span> <span class="p">(</span><span class="n">fbeta1</span> <span class="o">+</span> <span class="n">fr1</span> <span class="o">+</span> <span class="n">fleme1</span><span class="p">)</span>
      <span class="n">it</span> <span class="o">=</span> <span class="mi">0</span>
    
      <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">peso</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
        <span class="n">fbetarl</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">arg</span><span class="o">*</span> <span class="n">fbetarl</span><span class="p">[</span><span class="n">it</span><span class="p">]</span>
        <span class="n">it</span> <span class="o">+=</span><span class="mi">1</span>                            
      <span class="k">del</span> <span class="n">it</span> 
      
      
      
      <span class="n">saida</span> <span class="o">=</span> <span class="n">fbeta</span> <span class="o">+</span> <span class="n">fr</span> <span class="o">+</span> <span class="n">fleme</span> <span class="o">+</span> <span class="n">fbetarl</span>
    
    <span class="k">return</span> <span class="n">saida</span>
</div>
<div class="viewcode-block" id="navio.H"><a class="viewcode-back" href="../Navio.html#Navio.navio.H">[documentos]</a>  <span class="k">def</span> <span class="nf">H</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">GrausDeLib</span><span class="o">=</span><span class="mi">4</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Matriz de massa menos matriz de massa adicional</span>
<span class="sd">    _________________________</span>
<span class="sd">    Variáveis de entrada:</span>
<span class="sd">    </span>
<span class="sd">    GrausDeLib (integer)-- Graus de liberdade </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">H</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">H</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">casco</span><span class="o">.</span><span class="n">M</span><span class="p">(</span><span class="n">GrausDeLib</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">casco</span><span class="o">.</span><span class="n">Ma</span><span class="p">(</span><span class="n">GrausDeLib</span><span class="p">)</span>
    
    <span class="k">return</span>  <span class="n">sp</span><span class="o">.</span><span class="n">mat</span><span class="p">(</span><span class="n">H</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="navio.MatRot"><a class="viewcode-back" href="../Navio.html#Navio.navio.MatRot">[documentos]</a>  <span class="k">def</span> <span class="nf">MatRot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retorna a matrix de rotação de do referêncial solidárial para o </span>
<span class="sd">    inercial</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">p</span><span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">roll</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">3</span><span class="p">]</span>
      <span class="n">pitch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">4</span><span class="p">]</span>
      <span class="n">yaw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">roll</span><span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
      <span class="n">pitch</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
      <span class="n">yaw</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
      
    <span class="n">Rot</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">sp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">yaw</span><span class="p">)</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">pitch</span><span class="p">),</span> 
    <span class="o">-</span><span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">yaw</span><span class="p">)</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">roll</span><span class="p">)</span> <span class="o">+</span>
<span class="n">sp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">yaw</span><span class="p">)</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">pitch</span><span class="p">)</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">roll</span><span class="p">),</span> 
    <span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">yaw</span><span class="p">)</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">roll</span><span class="p">)</span> <span class="o">+</span> <span class="n">sp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">yaw</span><span class="p">)</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">roll</span><span class="p">)</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">pitch</span><span class="p">)</span>
<span class="p">],</span> 
    <span class="p">[</span><span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">yaw</span><span class="p">)</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">pitch</span><span class="p">),</span> 
    <span class="n">sp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">yaw</span><span class="p">)</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">roll</span><span class="p">)</span> <span class="o">+</span> <span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">roll</span><span class="p">)</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">pitch</span><span class="p">)</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">yaw</span><span class="p">),</span> 
    <span class="o">-</span><span class="n">sp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">yaw</span><span class="p">)</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">roll</span><span class="p">)</span> <span class="o">+</span> <span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">yaw</span><span class="p">)</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">roll</span><span class="p">)</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">pitch</span><span class="p">)</span>
<span class="p">],</span> 
    <span class="p">[</span><span class="o">-</span><span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">pitch</span><span class="p">),</span> <span class="n">sp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">pitch</span><span class="p">)</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">roll</span><span class="p">),</span> 
    <span class="n">sp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">pitch</span><span class="p">)</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">roll</span><span class="p">)]</span> <span class="p">])</span>
    
    <span class="n">Rot</span><span class="o">.</span><span class="n">shape</span>  <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">Rot</span><span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">matrix</span><span class="p">(</span><span class="n">Rot</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Rot</span>
</div>
<div class="viewcode-block" id="navio.f2"><a class="viewcode-back" href="../Navio.html#Navio.navio.f2">[documentos]</a>  <span class="k">def</span> <span class="nf">f2</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">VetF</span><span class="p">,</span> <span class="n">H</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calcula o valor de f(x) na equação</span>
<span class="sd">    x&#39; = f(x)</span>
<span class="sd">    onde x são é  o vetor de velocidades no sistema solidário</span>
<span class="sd">    _________________________</span>
<span class="sd">    Variáveis de entrada:</span>
<span class="sd">    </span>
<span class="sd">    GrausDeLib (integer)-- Graus de liberdade </span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">GrausDeLib</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">VetF</span><span class="p">)</span>
      
    <span class="k">if</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
      <span class="n">a</span><span class="o">=</span>  <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
      <span class="n">a</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.</span>
      <span class="n">a</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.</span>
      <span class="n">a</span><span class="p">[:</span><span class="mi">4</span><span class="p">,</span> <span class="p">:</span><span class="mi">4</span><span class="p">]</span><span class="o">=</span> <span class="n">H</span>

      <span class="n">b</span><span class="o">=</span>  <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
      <span class="n">b</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vel</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
      <span class="n">b</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vel</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">3</span><span class="p">])</span>
      <span class="n">b</span><span class="p">[:</span><span class="mi">4</span><span class="p">,</span> <span class="p">:]</span><span class="o">=</span> <span class="n">VetF</span>
    <span class="k">elif</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
      <span class="n">a</span><span class="o">=</span>  <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
      <span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.</span>
      <span class="n">a</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">=</span> <span class="n">H</span>

      <span class="n">b</span><span class="o">=</span>  <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
      <span class="n">b</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span> <span class="p">:]</span><span class="o">=</span> <span class="n">VetF</span>
      <span class="n">b</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
    
    <span class="n">saida</span> <span class="o">=</span> <span class="n">linalg</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="p">)</span> 

    <span class="k">return</span> <span class="n">saida</span>
    </div>
<div class="viewcode-block" id="navio.f"><a class="viewcode-back" href="../Navio.html#Navio.navio.f">[documentos]</a>  <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">velocidade</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="p">)):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    O p é uma tupla com o valor dos graus de liberdade</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">GrausDeLib</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">velocidade</span> <span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
      <span class="n">velarq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()</span>
      <span class="n">posarq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()</span>
      <span class="n">veltemp</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
      <span class="n">postemp</span> <span class="o">=</span>  <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
      <span class="k">if</span> <span class="n">GrausDeLib</span><span class="o">==</span><span class="mi">3</span><span class="p">:</span>
        <span class="n">veltemp</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">velocidade</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">veltemp</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">velocidade</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">postemp</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">velocidade</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
      <span class="k">elif</span> <span class="n">GrausDeLib</span><span class="o">==</span><span class="mi">4</span><span class="p">:</span>
        <span class="n">veltemp</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">velocidade</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">veltemp</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">velocidade</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">veltemp</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">velocidade</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">postemp</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">velocidade</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">postemp</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">velocidade</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaVel</span><span class="p">(</span><span class="n">veltemp</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaPos</span><span class="p">(</span><span class="n">postemp</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
      <span class="n">a</span><span class="o">=</span>  <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
      <span class="n">a</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.</span>
      <span class="n">a</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.</span>
      <span class="n">a</span><span class="p">[:</span><span class="mi">4</span><span class="p">,</span> <span class="p">:</span><span class="mi">4</span><span class="p">]</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">H</span><span class="p">(</span><span class="n">GrausDeLib</span><span class="p">)</span>

      <span class="n">b</span><span class="o">=</span>  <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
      <span class="n">b</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vel</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
      <span class="n">b</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vel</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">3</span><span class="p">])</span>
      <span class="n">b</span><span class="p">[:</span><span class="mi">4</span><span class="p">,</span> <span class="p">:]</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">VetF</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
      <span class="n">a</span><span class="o">=</span>  <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
      <span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.</span>
      <span class="n">a</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">H</span><span class="p">(</span><span class="n">GrausDeLib</span><span class="p">)</span>

      <span class="n">b</span><span class="o">=</span>  <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
      <span class="n">b</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span> <span class="p">:]</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">VetF</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> 
      <span class="n">b</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
    
    <span class="n">saida</span> <span class="o">=</span> <span class="n">linalg</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> 
    
    <span class="k">if</span> <span class="n">velocidade</span> <span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaVel</span><span class="p">(</span><span class="n">velarq</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaPos</span><span class="p">(</span><span class="n">posarq</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">saida</span>    </div>
<div class="viewcode-block" id="navio.fvein"><a class="viewcode-back" href="../Navio.html#Navio.navio.fvein">[documentos]</a>  <span class="k">def</span> <span class="nf">fvein</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    x = sp.array(u, v , w)</span>
<span class="sd">    p = (  roll, pitch, yaw)</span>
<span class="sd">    &quot;&quot;&quot;</span>
  
    <span class="k">return</span> <span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MatRot</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">*</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    </div>
<div class="viewcode-block" id="navio.simula"><a class="viewcode-back" href="../Navio.html#Navio.navio.simula">[documentos]</a>  <span class="k">def</span> <span class="nf">simula</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">met</span><span class="o">=</span><span class="s">&#39;euler&#39;</span><span class="p">,</span> <span class="n">t0</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mf">100.</span><span class="p">,</span> <span class="n">GrausDeLib</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
        <span class="n">velocidade</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">tipo</span><span class="o">=</span><span class="s">&#39;ZigZag&#39;</span><span class="p">,</span> <span class="n">leme</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mf">20.</span><span class="p">),</span>
        <span class="n">proa</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mf">20.</span><span class="p">),</span> <span class="n">RotCom</span> <span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">osa</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mf">0.05</span><span class="p">),</span>
        <span class="n">ospath</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mi">150</span><span class="p">),</span> <span class="n">erro</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mf">0.05</span><span class="p">),</span>
        <span class="n">errotf</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mf">0.05</span><span class="p">),</span> <span class="n">errotd</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mf">0.05</span><span class="p">),</span> <span class="n">arqs</span><span class="o">=</span><span class="s">&#39;saida&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simulador de manobras padrão</span>
<span class="sd">    _________________________</span>
<span class="sd">    Variáveis de entrada:</span>
<span class="sd">    </span>
<span class="sd">    GrausDeLib (integer)-- Graus de liberdade;        </span>
<span class="sd">    met -- Método de integração. Default- Euler;</span>
<span class="sd">    t0 -- Tempo inicial;</span>
<span class="sd">    dt -- Passo no tempo;</span>
<span class="sd">    t -- Tempo final </span>
<span class="sd">    tipo - tipo de manobra simulada. Zig-Zag10/10 e Curva_de_Giro_port</span>
<span class="sd">ou </span>
<span class="sd">    Curva_de_Giro_starboard . Default -Zig-Zag</span>
<span class="sd">    </span>
<span class="sd">    __________________________</span>
<span class="sd">    Saída:</span>
<span class="sd">    </span>
<span class="sd">    Tupla de sp.array</span>
<span class="sd">    </span>
<span class="sd">    (veloHis, posHis, acelHis, fHis, veloInerHis, lemeHis)</span>
<span class="sd">    </span>
<span class="sd">    Em cada elemento da tupla:</span>
<span class="sd">    A primeira coluna é o passo de tempo e as demais são as variáveis</span>
<span class="sd">    </span>
<span class="sd">    veloHis -- histórico de velocidades;</span>
<span class="sd">    posHis -- histórico de posições</span>
<span class="sd">    acelHis --- histórico de acelerações</span>
<span class="sd">    fHis -- histórico de forças </span>
<span class="sd">    veloInerHis -- histórico de velocidades no sistema inercial</span>
<span class="sd">    lemeHis -- histórico do comando de leme</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="c">#</span>
<span class="c">#        Tipo de Simulação a ser realizada:</span>
<span class="c">#</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">MudaPos</span><span class="p">(</span> <span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>  <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">]</span> <span class="p">]))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">MudaVel</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>  <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;unom&#39;</span><span class="p">]],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.</span><span class="p">]</span> <span class="p">]))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">MudaRotCom</span><span class="p">(</span><span class="n">RotCom</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">MudaVelCom</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;unom&#39;</span><span class="p">])</span>
<span class="c">#Log é o parâmetro que indica quando a simulação armazenou os dados do</span>
<span class="c">#relatório</span>
    <span class="k">if</span> <span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;Curva_de_Giro_port&#39;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaLemeCom</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">leme</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
      <span class="n">log</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">elif</span> <span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;Curva_de_Giro_starboard&#39;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaLemeCom</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="o">-</span><span class="n">leme</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
      <span class="n">log</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">elif</span> <span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;ZigZag&#39;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaLemeCom</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">leme</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
      <span class="n">exe</span> <span class="o">=</span> <span class="mi">0</span>
    
    

<span class="c">###############################</span>
<span class="c">##</span>
<span class="c">##   Dados relacionados a curva de zizag</span>
<span class="c">##</span>
<span class="c">###############################</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;ZigZag&#39;</span> <span class="ow">and</span> <span class="p">(((</span><span class="n">exe</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
<span class="o">&lt;=</span>
        <span class="o">-</span><span class="p">(</span><span class="n">proa</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">)</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">exe</span><span class="o">%</span><span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
<span class="o">&gt;=</span>
        <span class="p">(</span><span class="n">proa</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">)</span> <span class="p">))):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MudaLemeCom</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraLeme</span><span class="p">()</span><span class="o">*</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">exe</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
          <span class="n">dic</span><span class="p">[</span><span class="s">&#39;reach&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">erro</span>
          <span class="n">dic</span><span class="p">[</span><span class="s">&#39;ospath&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ospath</span>
          <span class="n">dic</span><span class="p">[</span><span class="s">&#39;osangle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">osa</span> <span class="o">-</span> <span class="n">dic</span><span class="p">[</span><span class="s">&#39;proa&#39;</span><span class="p">])</span>
          <span class="n">dados</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dic</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>

        <span class="n">exe</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">dic</span><span class="p">[</span><span class="s">&#39;exeNummber&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exe</span>
        <span class="n">dic</span><span class="p">[</span><span class="s">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tp</span> <span class="o">-</span> <span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
        <span class="n">dic</span><span class="p">[</span><span class="s">&#39;path&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">dic</span><span class="p">[</span><span class="s">&#39;proa&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
    
      <span class="k">if</span> <span class="n">tipo</span><span class="o">==</span><span class="s">&#39;ZigZag&#39;</span> <span class="ow">and</span> <span class="n">exe</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span> <span class="n">dic</span><span class="p">[</span><span class="s">&#39;path&#39;</span><span class="p">])</span><span class="o">&gt;</span><span class="n">ospath</span><span class="p">:</span>
          <span class="n">ospath</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span> <span class="n">dic</span><span class="p">[</span><span class="s">&#39;path&#39;</span><span class="p">])</span>  
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">])</span><span class="o">&gt;</span><span class="nb">abs</span><span class="p">(</span><span class="n">osa</span><span class="p">):</span>
          <span class="n">osa</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span> <span class="o">-</span> <span class="n">PosIni</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span> <span class="o">&lt;</span> <span class="n">erro</span><span class="p">:</span>
          <span class="n">erro</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span> <span class="o">-</span> <span class="n">PosIni</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>            

        
      
      

<span class="c">###############################</span>
<span class="c">##</span>
<span class="c">##   Dados relacionados a curva de Giro</span>
<span class="c">##</span>
<span class="c">###############################            </span>
      <span class="k">if</span> <span class="p">((</span><span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;Curva_de_Giro_port&#39;</span> <span class="ow">or</span>
        <span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;Curva_de_Giro_starboard&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">log</span><span class="p">):</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span> <span class="o">-</span> <span class="n">PosIni</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span> <span class="o">-</span>
          <span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="n">errotf</span><span class="p">):</span>
          <span class="n">errotf</span> <span class="o">=</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span> <span class="o">-</span> <span class="n">PosIni</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span> <span class="o">-</span>
              <span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">)))</span>
          <span class="n">dic</span><span class="p">[</span><span class="s">&#39;transfer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">PosIni</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
          <span class="n">dic</span><span class="p">[</span><span class="s">&#39;advance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">PosIni</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span> <span class="o">-</span> <span class="n">PosIni</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span> <span class="o">-</span> <span class="n">sp</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">errotd</span><span class="p">:</span>
          <span class="n">errotd</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span> <span class="o">-</span> <span class="n">PosIni</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span> <span class="o">-</span> <span class="n">sp</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
          <span class="n">dic</span><span class="p">[</span><span class="s">&#39;taticalDiameter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> \
<span class="n">PosIni</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span> <span class="o">-</span> <span class="n">PosIni</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">sp</span><span class="o">.</span><span class="n">pi</span> <span class="p">:</span>
          <span class="n">log</span> <span class="o">=</span> <span class="bp">True</span>
          <span class="n">dados</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dic</span><span class="p">)</span>


      <span class="n">Rot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MatRot</span><span class="p">()</span>
      
<span class="c">#</span>
<span class="c">#                inc = Velocidades Lineares no Sistema Inecial</span>
<span class="c">#</span>
      <span class="n">VelIn</span> <span class="o">=</span> <span class="n">Rot</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">matrix</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">])</span>

      <span class="n">PosIne</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
      
<span class="c">##################################</span>
<span class="c">#                </span>
<span class="c">#                       Guardando os parâmetros</span>
<span class="c">#                </span>
<span class="c">##################################                </span>
<span class="c">#          Velocidade Inercial      </span>
      <span class="n">d</span><span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">VelIn</span><span class="p">)</span>
      <span class="n">veloInerHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="mi">1</span><span class="p">:]</span> <span class="o">=</span> <span class="n">d</span> <span class="c">#</span>
      <span class="n">veloInerHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">tp</span> <span class="c">#</span>
<span class="c">#           Histórico Leme</span>
      <span class="n">lemeHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">tp</span>
      <span class="n">lemeHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraLeme</span><span class="p">()</span>
<span class="c">#           Histórico da posição</span>
      <span class="n">temp</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">())</span>
      <span class="n">posHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="n">temp</span><span class="p">))</span>

<span class="c">#           Histórico da Velocidade</span>
      <span class="n">temp</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">())</span>
      <span class="n">veloHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="n">temp</span><span class="p">))</span>

<span class="c">#           Histórico das Forças </span>
      <span class="n">temp</span> <span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">VetF</span><span class="p">(</span><span class="n">GrausDeLib</span><span class="p">)))</span>
      <span class="k">if</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">fHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:]</span>  <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="n">temp</span><span class="p">))</span>
      <span class="k">elif</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">fHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span>  <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="n">temp</span><span class="p">[:</span><span class="mi">2</span><span class="p">]))</span>
        <span class="n">fHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>  <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

<span class="c">#           Histórico Propulsor</span>
      <span class="n">propHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraRot</span><span class="p">()))</span>

<span class="c">#           Histórico das Acelerações </span>
      <span class="n">Acel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">GrausDeLib</span><span class="p">)</span>
      
      <span class="k">if</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">vetor</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">vetor</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">Acel</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">vetor</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">Acel</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">vetor</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">Acel</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
      <span class="k">elif</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">vetor</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">vetor</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">Acel</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">vetor</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">Acel</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
      <span class="n">acelHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">vetor</span><span class="p">)))</span>           



      <span class="k">del</span> <span class="n">temp</span> 
<span class="c">##############################</span>
<span class="c">#</span>
<span class="c">#    Criação de vetor de graus de liberdade</span>
<span class="c">#</span>
<span class="c">##############################</span>
      <span class="k">if</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">xIn</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        
        <span class="n">xIn</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">xIn</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">xIn</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">xIn</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">xIn</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">xIn</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
      <span class="k">elif</span>  <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">xIn</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="n">xIn</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">xIn</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">xIn</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">xIn</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>         
<span class="c">##################################</span>
<span class="c">#                </span>
<span class="c">#                      Integração da Aceleração solidária</span>
<span class="c">#                </span>
<span class="c">##################################</span>
      <span class="k">if</span> <span class="n">met</span> <span class="o">==</span> <span class="s">&#39;euler&#39;</span><span class="p">:</span>
        <span class="n">xIn</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">integrador</span><span class="o">.</span><span class="n">euler</span><span class="p">(</span><span class="n">Acel</span><span class="p">,</span> <span class="n">xIn</span><span class="p">,</span> <span class="n">dt</span> <span class="p">)</span>
      <span class="k">elif</span> <span class="n">met</span> <span class="o">==</span><span class="s">&#39;rk4&#39;</span><span class="p">:</span>
        <span class="n">xIn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">integrador</span><span class="o">.</span><span class="n">rk4</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">facel</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">tp</span><span class="p">,</span> <span class="n">xIn</span><span class="p">)</span>
      
<span class="c">##################################</span>
      <span class="k">if</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">xIn</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> 
        <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">xIn</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> 
        <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">xIn</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">x</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">xIn</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
      <span class="k">elif</span> <span class="n">GrausDeLib</span><span class="o">==</span><span class="mi">3</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">xIn</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> 
        <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">xIn</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> 
        <span class="n">x</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">xIn</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>                
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaVel</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>               

      <span class="k">del</span> <span class="n">x</span>
<span class="c">##################################</span>
<span class="c">##                </span>
<span class="c">##                       Integração da velocidade inercial</span>
<span class="c">##                </span>
<span class="c">###################################</span>
      <span class="n">posfutura</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
      <span class="n">posfutura</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">integrador</span><span class="o">.</span><span class="n">euler</span><span class="p">(</span><span class="n">VelIn</span><span class="p">,</span> <span class="n">PosIne</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
      
<span class="c">##################################</span>
      <span class="k">if</span> <span class="n">GrausDeLib</span><span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">posfutura</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">xIn</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">posfutura</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">xIn</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
      <span class="k">elif</span> <span class="n">GrausDeLib</span><span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">posfutura</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">xIn</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaPos</span><span class="p">(</span><span class="n">posfutura</span><span class="p">)</span>
      <span class="n">cont</span> <span class="o">+=</span> <span class="mi">1</span>
      <span class="k">del</span> <span class="n">posfutura</span>
      
      <span class="bp">self</span><span class="o">.</span><span class="n">prop</span><span class="o">.</span><span class="n">MudaRot</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">leme</span><span class="o">.</span><span class="n">MudaLeme</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">veloHis</span><span class="p">,</span> <span class="n">posHis</span><span class="p">,</span> <span class="n">acelHis</span><span class="p">,</span> <span class="n">fHis</span><span class="p">,</span> <span class="n">veloInerHis</span><span class="p">,</span> <span class="n">lemeHis</span><span class="p">,</span>
<span class="n">propHis</span><span class="p">,</span> 
        <span class="n">dados</span><span class="p">)</span>
    
    </div>
  <span class="k">def</span> <span class="nf">getCurvaGiro</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">peso</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">met</span><span class="o">=</span><span class="s">&#39;euler&#39;</span><span class="p">,</span> <span class="n">t0</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mf">100.</span><span class="p">,</span>
          <span class="n">GrausDeLib</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">tipo</span><span class="o">=</span><span class="s">&#39;port&#39;</span><span class="p">,</span> <span class="n">leme</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mf">20.</span><span class="p">),</span>
          <span class="n">RotCom</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">VelCom</span><span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">Vel</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">Eta</span><span class="o">=</span><span class="s">&#39;vel&#39;</span><span class="p">,</span>
          <span class="n">PosIne</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">]</span> <span class="p">]),</span>
          <span class="n">errotf</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mf">0.05</span><span class="p">),</span> <span class="n">errotd</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mf">0.05</span><span class="p">),</span>
          <span class="n">errosr</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mf">0.001</span><span class="p">),</span> <span class="n">saida</span><span class="o">=</span><span class="s">&#39;txt&#39;</span><span class="p">,</span> <span class="n">arqs</span><span class="o">=</span><span class="s">&#39;saida&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">RotCom</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">RotCom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;rotnom&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">VelCom</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">VelCom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;unom&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">Vel</span> <span class="o">==</span>  <span class="bp">None</span><span class="p">:</span>
      <span class="n">Vel</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>  <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;unom&#39;</span><span class="p">]],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span>
<span class="p">[</span><span class="mf">0.</span><span class="p">]</span>
<span class="p">])</span>
    
    <span class="bp">self</span><span class="o">.</span><span class="n">MudaPos</span><span class="p">(</span> <span class="n">PosIne</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">MudaVel</span><span class="p">(</span><span class="n">Vel</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">MudaRotCom</span><span class="p">(</span><span class="n">RotCom</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">MudaVelCom</span><span class="p">(</span><span class="n">VelCom</span><span class="p">)</span>

<span class="c">#Log é o parâmetro que indica quando a simulação armazenou os dados do</span>
<span class="c">#relatório</span>
    <span class="k">if</span> <span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;port&#39;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaLemeCom</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">leme</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
      <span class="n">log</span> <span class="o">=</span> <span class="bp">False</span>
      <span class="n">log1</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">elif</span> <span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;starboard&#39;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaLemeCom</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="o">-</span><span class="n">leme</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
      <span class="n">log</span> <span class="o">=</span> <span class="bp">False</span>
      <span class="n">log1</span> <span class="o">=</span> <span class="bp">False</span>
<span class="c">#</span>
<span class="c">#   Criando espaço na memória para armazenar os parâmetros da curva</span>
<span class="c">#</span>
    <span class="n">nlin</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">t0</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">dt</span><span class="p">))</span> <span class="c">#Número de linhas das colunas a serem</span>
<span class="c">#criadas</span>
    <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span>
      <span class="n">lemeHis</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nlin</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="c">#historico do leme</span>
      <span class="n">veloHis</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nlin</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span> <span class="c">#histórico da velocidade</span>
      <span class="n">veloInerHis</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nlin</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span><span class="c">#histórico da velocidade no</span>
<span class="c">#sistema inercial Verificar depois a necessidade</span>
      <span class="n">posHis</span> <span class="o">=</span>  <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="n">nlin</span><span class="p">,</span> <span class="mi">7</span><span class="p">])</span> <span class="c">#histórico da posição no sistema</span>
<span class="c">#inercial</span>
      <span class="n">fHis</span>     <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nlin</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span> <span class="c">#histórico de forças</span>
      <span class="n">acelHis</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nlin</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span> <span class="c">#histórico de acelerações</span>
      <span class="n">propHis</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nlin</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="c">#histórico Máquina</span>
      <span class="n">EtaHis</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nlin</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="c">#histórico Eta</span>
      <span class="n">betaHis</span> <span class="o">=</span>  <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nlin</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="c">#histórico beta</span>
    <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
      <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">arqs</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">arqs</span><span class="p">,</span> <span class="n">arqs</span> <span class="o">+</span> <span class="s">&#39;2&#39;</span><span class="p">)</span>
      <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">arqs</span><span class="p">)</span>
      <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">arqs</span><span class="p">)</span>
      <span class="n">lemeHis</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;leme.dat&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span><span class="c">#historico do leme</span>
      <span class="n">lemeHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Navio &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nome</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span>  
            <span class="s">&#39;#Manobra de Curva de Giro</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span> 
      <span class="n">lemeHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Valor do leme em rad</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">lemeHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#temp&#39;</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;leme&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
            <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      
      <span class="n">veloHis</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;velo.dat&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="c">#histórico da velocidade</span>
      <span class="n">veloHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Navio &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nome</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> 
            <span class="s">&#39;#Manobra de Curva de Giro</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">veloHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Velocidade Sistema Solidário </span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">veloHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#temp&#39;</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;u&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
            <span class="s">&#39;v&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;w&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> 
            <span class="s">&#39;dot roll&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;dot pitch&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
<span class="o">+</span> 
            <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;dot yaw&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span> 
      
      <span class="n">veloInerHis</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;veloiner.dat&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span><span class="c">#histórico da velocidade no</span>
<span class="c">#sistema inercial Verificar depois a necessidade</span>
      <span class="n">veloInerHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Navio &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nome</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span>  
              <span class="s">&#39;#Manobra de Curva de Giro</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">veloInerHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Velocidade Inercial</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">veloInerHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#temp&#39;</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;u&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
              <span class="s">&#39;v&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;r&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span> 

      <span class="n">posHis</span> <span class="o">=</span>  <span class="nb">open</span><span class="p">(</span><span class="s">&#39;pos.dat&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span><span class="c">#histórico da posição no sistema</span>
<span class="c">#inercial</span>
      <span class="n">posHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Navio &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nome</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span>  
            <span class="s">&#39;#Manobra de Curva de Giro</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">posHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Posição e Orientação</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">posHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#temp&#39;</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;x&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
            <span class="s">&#39;y&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;z&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
            <span class="s">&#39;roll&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;pitch&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
            <span class="s">&#39;yaw&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span> 

      <span class="n">fHis</span>     <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;forcas.dat&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="c">#histórico de forças</span>
      <span class="n">fHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Navio &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nome</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> 
          <span class="s">&#39;#Manobra de Curva de Giro</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">fHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Forças e Momentos</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">fHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#temp&#39;</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;X&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
          <span class="s">&#39;Y&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;K&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
          <span class="s">&#39;N&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span> 
      
      <span class="n">acelHis</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;acel.dat&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="c">#histórico de acelerações</span>
      <span class="n">acelHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Navio &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nome</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span>  
            <span class="s">&#39;#Manobra de Curva de Giro</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">acelHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Aceleração</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">acelHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#temp&#39;</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;u&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
            <span class="s">&#39;v&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;w&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
            <span class="s">&#39;ddotroll&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;ddotpitch&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
<span class="o">+</span>							<span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;ddotyaw&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span> 

      <span class="n">propHis</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;propulsor.dat&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="c">#histórico Máquina</span>
      <span class="n">propHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Navio &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nome</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> 
            <span class="s">&#39;#Manobra de Curva de Giro</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">propHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Rotações do propulsor</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">propHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#temp&#39;</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;rot&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      
      <span class="n">EtaHis</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;Eta.dat&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="c">#histórico Eta</span>
      <span class="n">EtaHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Navio &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nome</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span>  
            <span class="s">&#39;#Manobra de Curva de Giro</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">EtaHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Eta </span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">EtaHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#temp&#39;</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;rot&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
<span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>


      <span class="n">betaHis</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;beta.dat&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="c">#histórico Eta</span>
      <span class="n">betaHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Navio &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nome</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span>  
            <span class="s">&#39;#Manobra de Curva de Giro</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">betaHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Beta </span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">betaHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#temp&#39;</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;rot&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
            <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      
      <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s">&#39;..&#39;</span><span class="p">)</span>
      <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s">&#39;..&#39;</span><span class="p">)</span>
    
    <span class="n">dados</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">dic</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">PosIni</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>           

    <span class="k">del</span> <span class="n">nlin</span> <span class="c">#não preciso mais</span>
    <span class="n">cont</span> <span class="o">=</span><span class="mi">0</span> <span class="c">#Contador</span>
    
    <span class="k">if</span> <span class="n">peso</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>   
      <span class="n">par</span> <span class="o">=</span>   <span class="p">(</span><span class="n">GrausDeLib</span><span class="p">,</span> <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">par</span> <span class="o">=</span> <span class="p">(</span><span class="n">GrausDeLib</span><span class="p">,</span> <span class="n">peso</span><span class="p">)</span>
<span class="c">#</span>
<span class="c">#   Iteração</span>
<span class="c">#</span>

    <span class="k">for</span> <span class="n">tp</span> <span class="ow">in</span> <span class="n">sp</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">t0</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
      <span class="k">if</span> <span class="ow">not</span> <span class="n">log1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">cont</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
          <span class="n">V1</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">cont</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
          <span class="n">V2</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">cont</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
          <span class="n">V3</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">cont</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
          <span class="n">V4</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
          <span class="n">V1</span> <span class="o">=</span> <span class="n">V2</span>
          <span class="n">V2</span> <span class="o">=</span> <span class="n">V3</span>
          <span class="n">V3</span> <span class="o">=</span> <span class="n">V4</span>
          <span class="n">V4</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>                
        <span class="k">if</span> <span class="n">log</span><span class="p">:</span>
          <span class="k">if</span> <span class="n">stats</span><span class="o">.</span><span class="n">tstd</span><span class="p">((</span><span class="n">V1</span><span class="p">,</span> <span class="n">V2</span><span class="p">,</span> <span class="n">V3</span><span class="p">,</span> <span class="n">V4</span><span class="p">))</span><span class="o">&lt;</span><span class="n">errosr</span><span class="p">:</span>
            <span class="n">dic</span><span class="p">[</span><span class="s">&#39;steadytr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">5</span><span class="p">])</span>
            <span class="n">dados</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dic</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
            <span class="n">log1</span><span class="o">=</span> <span class="bp">True</span>
          
        <span class="k">if</span>  <span class="ow">not</span> <span class="n">log</span><span class="p">:</span>
          <span class="k">if</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span> <span class="o">-</span> <span class="n">PosIni</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span> <span class="o">-</span> 
              <span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="n">errotf</span><span class="p">):</span>
            <span class="n">errotf</span> <span class="o">=</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span> <span class="o">-</span> <span class="n">PosIni</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span> <span class="o">-</span>
                  <span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">)))</span>
            <span class="n">dic</span><span class="p">[</span><span class="s">&#39;transfer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">PosIni</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">dic</span><span class="p">[</span><span class="s">&#39;advance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">PosIni</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
          <span class="k">if</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span> <span class="o">-</span> <span class="n">PosIni</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span> <span class="o">-</span> <span class="n">sp</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span> <span class="o">&lt;=</span>
            <span class="n">errotd</span><span class="p">):</span>
            <span class="n">errotd</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span> <span class="o">-</span> <span class="n">PosIni</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span> <span class="o">-</span>
                  <span class="n">sp</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
            <span class="n">dic</span><span class="p">[</span><span class="s">&#39;taticalDiameter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span>
                          <span class="n">PosIni</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
          <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span> <span class="o">-</span> <span class="n">PosIni</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">sp</span><span class="o">.</span><span class="n">pi</span><span class="p">:</span>
            <span class="n">log</span> <span class="o">=</span> <span class="bp">True</span>


<span class="c">###################################</span>
      <span class="n">ft</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">VetF</span><span class="p">(</span><span class="n">par</span><span class="p">)</span> 
<span class="c">###################################</span>
<span class="c">##</span>
<span class="c">##                inc = Velocidades Lineares no Sistema Inecial</span>
<span class="c">##</span>
<span class="c">###################################</span>
      <span class="n">MatRot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MatRot</span><span class="p">()</span>
      
      <span class="n">VelIn</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">MatRot</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">])</span>

      <span class="n">PosIne</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>


<span class="c">##################################</span>
<span class="c">##                </span>
<span class="c">##                       Guardando os parâmetros</span>
<span class="c">##                </span>
<span class="c">##################################                </span>
<span class="c">#          Velocidade Inercial</span>
      <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
        <span class="n">veloInerHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">VelIn</span><span class="p">:</span>
          <span class="n">veloInerHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.5e</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="n">veloInerHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">VelIn</span><span class="p">)</span>
        <span class="n">veloInerHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="mi">1</span><span class="p">:]</span> <span class="o">=</span> <span class="n">d</span> <span class="c">#</span>
        <span class="n">veloInerHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">tp</span> <span class="c">#</span>
<span class="c">#           Histórico Leme</span>
      <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
        <span class="n">lemeHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="n">lemeHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraLeme</span><span class="p">())</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span>
        <span class="n">lemeHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">tp</span>
        <span class="n">lemeHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraLeme</span><span class="p">()</span>
<span class="c">#           Histórico da posição</span>
      <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
        <span class="n">posHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">():</span>
          <span class="n">posHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.5e</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="n">posHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span>            
        <span class="n">temp</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">())</span>
        <span class="n">posHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="n">temp</span><span class="p">))</span>
        <span class="k">del</span> <span class="n">temp</span>
<span class="c">#           Histórico da Velocidade</span>
      <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
        <span class="n">veloHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">():</span>
          <span class="n">veloHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.5e</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="n">veloHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span> 
        <span class="n">temp</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">())</span>
        <span class="n">veloHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="n">temp</span><span class="p">))</span>
        <span class="k">del</span> <span class="n">temp</span>
<span class="c">#           Histórico das Forças </span>
      <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
          <span class="n">temp</span><span class="o">=</span> <span class="n">ft</span>
        <span class="k">elif</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
          <span class="n">temp</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>  <span class="o">=</span> <span class="n">ft</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
          <span class="n">temp</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>  <span class="o">=</span> <span class="n">ft</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">fHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">temp</span><span class="p">:</span>
          <span class="n">fHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.5e</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="n">fHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span> 
        <span class="n">temp</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ft</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
          <span class="n">fHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="n">temp</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
          <span class="n">fHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="n">temp</span><span class="p">[:</span><span class="mi">2</span><span class="p">]))</span>
          <span class="n">fHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

<span class="c">#           Histórico Propulsor</span>
      <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
        <span class="n">propHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="n">propHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraRot</span><span class="p">()</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span>
        <span class="n">propHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraRot</span><span class="p">()))</span>
<span class="c">#           Histórico Eta</span>
      <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
        <span class="n">EtaHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Eta</span> <span class="o">==</span> <span class="s">&#39;rot&#39;</span><span class="p">:</span>
          <span class="n">EtaHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraRotCom</span><span class="p">()</span> <span class="o">/</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">MostraRot</span><span class="p">())</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">Eta</span> <span class="o">==</span> <span class="s">&#39;vel&#39;</span><span class="p">:</span>
          <span class="n">EtaHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">%</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraVelCom</span><span class="p">()</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
<span class="o">+</span>
                <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">Eta</span><span class="o">==</span> <span class="s">&#39;rot&#39;</span><span class="p">:</span>
          <span class="n">EtaHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraRotCom</span><span class="p">()</span> <span class="o">/</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">MostraRot</span><span class="p">()))</span>
        <span class="k">elif</span> <span class="n">Eta</span> <span class="o">==</span> <span class="s">&#39;vel&#39;</span><span class="p">:</span>
          <span class="n">EtaHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> 
                        <span class="bp">self</span><span class="o">.</span><span class="n">MostraVelCom</span><span class="p">()</span> <span class="o">/</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">]))</span>

<span class="c">#           Histórico Beta</span>
      <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
        <span class="n">betaHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="n">betaHis</span><span class="o">.</span><span class="n">write</span><span class="p">((</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">%</span> 
              <span class="n">sp</span><span class="o">.</span><span class="n">arctan</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span>
              <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        
      <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span>
        <span class="n">betaHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span>
                      <span class="n">sp</span><span class="o">.</span><span class="n">arctan</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
<span class="o">/</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">])))</span>

<span class="c">#           Histórico das Acelerações </span>
      <span class="n">Acel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f2</span><span class="p">(</span><span class="n">ft</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">H</span><span class="p">(</span><span class="n">GrausDeLib</span><span class="p">))</span>
      <span class="n">vetor</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
      <span class="k">if</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">vetor</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">Acel</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">vetor</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">Acel</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">vetor</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">Acel</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
      <span class="k">elif</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">vetor</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">Acel</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">vetor</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">Acel</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
      <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
        <span class="n">acelHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">vetor</span><span class="p">:</span>
          <span class="n">acelHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.5e</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">arg</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="n">acelHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span>  
        <span class="n">acelHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">vetor</span><span class="p">)))</span>       

  
  
        <span class="k">del</span> <span class="n">temp</span> 
<span class="c">##############################</span>
<span class="c">#</span>
<span class="c">#    Criação de vetor de graus de liberdade</span>
<span class="c">#</span>
<span class="c">##############################</span>
      <span class="k">if</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">vt</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        
        <span class="n">vt</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">vt</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">vt</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">vt</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">vt</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">vt</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
      <span class="k">elif</span>  <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">vt</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="n">vt</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">vt</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">vt</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">vt</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>         
<span class="c">##################################</span>
<span class="c">##                </span>
<span class="c">##                      Integração da Aceleração solidária</span>
<span class="c">##                </span>
<span class="c">##################################</span>
      <span class="k">if</span> <span class="n">met</span> <span class="o">==</span> <span class="s">&#39;euler&#39;</span><span class="p">:</span>
        <span class="n">vt</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">integrador</span><span class="o">.</span><span class="n">euler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span> <span class="n">vt</span><span class="p">,</span> <span class="n">tp</span><span class="p">,</span> <span class="n">dt</span> <span class="p">,</span><span class="n">par</span>  <span class="p">)</span>
      <span class="k">elif</span> <span class="n">met</span> <span class="o">==</span><span class="s">&#39;rk4&#39;</span><span class="p">:</span>
        <span class="n">vt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">integrador</span><span class="o">.</span><span class="n">rk4</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span> <span class="n">vt</span><span class="p">,</span> <span class="n">tp</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">par</span><span class="p">)</span>
      
<span class="c">##################################</span>
      <span class="k">if</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">vt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> 
        <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">vt</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> 
        <span class="n">v</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">vt</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">v</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">vt</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
      <span class="k">elif</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">vt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> 
        <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">vt</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> 
        <span class="n">v</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">vt</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>                
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaVel</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>               

      <span class="k">del</span> <span class="n">v</span>
<span class="c">##################################</span>
<span class="c">##                </span>
<span class="c">##                       Integração da velocidade inercial</span>
<span class="c">##                </span>
<span class="c">###################################</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
      <span class="k">if</span> <span class="n">met</span> <span class="o">==</span> <span class="s">&#39;euler&#39;</span><span class="p">:</span>
        <span class="n">x</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">integrador</span><span class="o">.</span><span class="n">euler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fvein</span> <span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">tp</span><span class="p">,</span> <span class="n">dt</span> <span class="p">,</span>
                      <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">3</span><span class="p">:]</span> <span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[:</span><span class="mi">3</span><span class="p">]))</span>	
      <span class="k">elif</span> <span class="n">met</span> <span class="o">==</span> <span class="s">&#39;rk4&#39;</span><span class="p">:</span>
        <span class="n">x</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">integrador</span><span class="o">.</span><span class="n">rk4</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fvein</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[:</span><span class="mi">3</span><span class="p">],</span>
                      <span class="n">tp</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">3</span><span class="p">:],</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[:</span><span class="mi">3</span><span class="p">]))</span>
<span class="c">##################################</span>
      <span class="k">if</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">vt</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">x</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">vt</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
      <span class="k">elif</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">x</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">vt</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaPos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
      
      <span class="k">del</span> <span class="n">x</span>
      <span class="n">cont</span> <span class="o">+=</span> <span class="mi">1</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">prop</span><span class="o">.</span><span class="n">MudaRot</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">leme</span><span class="o">.</span><span class="n">MudaLeme</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
      <span class="n">arq</span> <span class="o">=</span> <span class="p">[</span><span class="n">veloHis</span><span class="p">,</span> <span class="n">posHis</span><span class="p">,</span> <span class="n">acelHis</span><span class="p">,</span> <span class="n">fHis</span><span class="p">,</span> <span class="n">veloInerHis</span><span class="p">,</span> <span class="n">lemeHis</span><span class="p">,</span>
        <span class="n">propHis</span><span class="p">,</span> <span class="n">EtaHis</span><span class="p">]</span>
      <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">arq</span><span class="p">:</span>
        <span class="n">arg</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
      <span class="k">return</span> <span class="n">dados</span>
    <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">(</span><span class="n">veloHis</span><span class="p">,</span> <span class="n">posHis</span><span class="p">,</span> <span class="n">acelHis</span><span class="p">,</span> <span class="n">fHis</span><span class="p">,</span> <span class="n">veloInerHis</span><span class="p">,</span> <span class="n">lemeHis</span><span class="p">,</span>
          <span class="n">propHis</span><span class="p">,</span> <span class="n">EtaHis</span><span class="p">,</span> <span class="n">dados</span><span class="p">,</span> <span class="n">betaHis</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">getCurvaZigZag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">peso</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">met</span><span class="o">=</span><span class="s">&#39;euler&#39;</span><span class="p">,</span> <span class="n">t0</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mf">100.</span><span class="p">,</span>
                      <span class="n">GrausDeLib</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">tipo</span><span class="o">=</span><span class="s">&#39;port&#39;</span><span class="p">,</span> <span class="n">leme</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mf">20.</span><span class="p">),</span>
                      <span class="n">RotCom</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">VelCom</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">Vel</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                      <span class="n">proa</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">20.</span><span class="p">]),</span> <span class="n">Eta</span><span class="o">=</span><span class="s">&#39;vel&#39;</span><span class="p">,</span> 
                      <span class="n">PosIne</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.</span><span class="p">],[</span><span class="mf">0.</span><span class="p">],[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">]]),</span>
                      <span class="n">osa</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mf">0.0</span><span class="p">),</span> <span class="n">ospath</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mf">0.0</span><span class="p">),</span>
                      <span class="n">erro</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mf">0.005</span><span class="p">),</span><span class="n">saida</span><span class="o">=</span><span class="s">&#39;txt&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simulador de manobras padrão</span>
<span class="sd">    _________________________</span>
<span class="sd">    Variáveis de entrada:</span>
<span class="sd">    </span>
<span class="sd">    GrausDeLib (integer)-- Graus de liberdade;        </span>
<span class="sd">    met -- Método de integração. Default- Euler;</span>
<span class="sd">    t0 -- Tempo inicial;</span>
<span class="sd">    dt -- Passo no tempo;</span>
<span class="sd">    t -- Tempo final </span>
<span class="sd">    tipo - tipo de manobra simulada. Zig-Zag10/10 e Curva_de_Giro_port</span>
<span class="sd">ou</span>
<span class="sd">Curva_de_Giro_starboard . Default -Zig-Zag</span>
<span class="sd">    </span>
<span class="sd">    __________________________</span>
<span class="sd">    Saída:</span>
<span class="sd">    </span>
<span class="sd">    Tupla de sp.array</span>
<span class="sd">    </span>
<span class="sd">    (veloHis, posHis, acelHis, fHis, veloInerHis, lemeHis)</span>
<span class="sd">    </span>
<span class="sd">    Em cada elemento da tupla:</span>
<span class="sd">    A primeira coluna é o passo de tempo e as demais são as variáveis</span>
<span class="sd">    </span>
<span class="sd">    veloHis -- histórico de velocidades;</span>
<span class="sd">    posHis -- histórico de posições</span>
<span class="sd">    acelHis --- histórico de acelerações</span>
<span class="sd">    fHis -- histórico de forças </span>
<span class="sd">    veloInerHis -- histórico de velocidades no sistema inercial</span>
<span class="sd">    lemeHis -- histórico do comando de leme</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">RotCom</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">RotCom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;rotnom&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">VelCom</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">VelCom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;unom&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">Vel</span> <span class="o">==</span>  <span class="bp">None</span><span class="p">:</span>
      <span class="n">Vel</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;unom&#39;</span><span class="p">]],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">]</span>
              <span class="p">])</span>
    
    <span class="bp">self</span><span class="o">.</span><span class="n">MudaPos</span><span class="p">(</span> <span class="n">PosIne</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">MudaVel</span><span class="p">(</span><span class="n">Vel</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">MudaRotCom</span><span class="p">(</span><span class="n">RotCom</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">MudaVelCom</span><span class="p">(</span><span class="n">VelCom</span><span class="p">)</span>


    <span class="k">if</span> <span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;port&#39;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaLemeCom</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">leme</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
      <span class="n">exe</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">elif</span> <span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;starboard&#39;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaLemeCom</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="o">-</span><span class="n">leme</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
      <span class="n">exe</span><span class="o">=</span><span class="mi">1</span>

    
<span class="c">#</span>
<span class="c">#   Criando espaço na memória para armazenar os parâmetros da curva</span>
<span class="c">#</span>
<span class="c">#Número de linhas das colunas a seremcriadas</span>
    <span class="n">nlin</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">t0</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">dt</span><span class="p">))</span> 

    <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span>
      <span class="n">lemeHis</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nlin</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="c">#historico do leme</span>
      <span class="n">veloHis</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nlin</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span> <span class="c">#histórico da velocidade</span>
      <span class="n">veloInerHis</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nlin</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span><span class="c">#histórico da velocidade no</span>
<span class="c">#sistema inercial Verificar depois a necessidade</span>
      <span class="n">posHis</span> <span class="o">=</span>  <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="n">nlin</span><span class="p">,</span> <span class="mi">7</span><span class="p">])</span> <span class="c">#histórico da posição no sistema</span>
<span class="c">#inercial</span>
      <span class="n">fHis</span>     <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nlin</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span> <span class="c">#histórico de forças</span>
      <span class="n">acelHis</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nlin</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span> <span class="c">#histórico de acelerações</span>
      <span class="n">propHis</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nlin</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="c">#histórico Máquina</span>
      <span class="n">EtaHis</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nlin</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="c">#histórico Eta</span>
    <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
      <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s">&#39;./saida/ZigZag&#39;</span><span class="p">)</span>
      <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s">&#39;./saida/ZigZag&#39;</span><span class="p">)</span>
      <span class="n">lemeHis</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;leme.dat&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span><span class="c">#historico do leme</span>
      <span class="n">lemeHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Navio &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nome</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span>  <span class="s">&#39;#Manobra de Curva </span><span class="se">\</span>
<span class="s">            de Zig-Zag</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">lemeHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Valor do leme em rad</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">lemeHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#temp&#39;</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;leme&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
            <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      
      <span class="n">veloHis</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;velo.dat&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="c">#histórico da velocidade</span>
      <span class="n">veloHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Navio &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nome</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span>  <span class="s">&#39;#Manobra de Curva </span><span class="se">\</span>
<span class="s">            de Zig-Zag</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">veloHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Velocidade Sistema Solidário </span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">veloHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#temp&#39;</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;u&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
              <span class="s">&#39;v&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;w&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;dot </span><span class="se">\</span>
<span class="s">              roll&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39; dot pitch&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> 
              <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;dot yaw&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span> 
      
      <span class="n">veloInerHis</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;veloiner.dat&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span><span class="c">#histórico da velocidade no</span>
<span class="c">#sistema inercial Verificar depois a necessidade</span>
      <span class="n">veloInerHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Navio &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nome</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span>  <span class="s">&#39;#Manobra de </span><span class="se">\</span>
<span class="s">              Curva de Zig-Zag</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">veloInerHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Velocidade Inercial</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">veloInerHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#temp&#39;</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;u&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
              <span class="s">&#39;v&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span>  <span class="o">+</span> <span class="s">&#39;r&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span> 

      <span class="n">posHis</span> <span class="o">=</span>  <span class="nb">open</span><span class="p">(</span><span class="s">&#39;pos.dat&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span><span class="c">#histórico da posição no sistema</span>
<span class="c">#inercial</span>
      <span class="n">posHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Navio &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nome</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span>  <span class="s">&#39;#Manobra de Curva </span><span class="se">\</span>
<span class="s">            de Zig-Zag</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">posHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Posição e Orientação</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">posHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#temp&#39;</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;x&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
            <span class="s">&#39;y&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;z&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
            <span class="s">&#39;roll&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;pitch&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
            <span class="s">&#39;yaw&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span> 

      <span class="n">fHis</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;forcas.dat&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="c">#histórico de forças</span>
      <span class="n">fHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Navio &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nome</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> <span class="s">&#39;#Manobra de Curva de </span><span class="se">\</span>
<span class="s">            Zig-Zag</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">fHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Forças e Momentos</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">fHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#temp&#39;</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;X&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
          <span class="s">&#39;Y&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;K&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
          <span class="s">&#39;N&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span> 
      
      <span class="n">acelHis</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;acel.dat&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="c">#histórico de acelerações</span>
      <span class="n">acelHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Navio &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nome</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> <span class="s">&#39;#Manobra de Curva </span><span class="se">\</span>
<span class="s">            de Zig-Zag</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">acelHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Aceleração</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">acelHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#temp&#39;</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;u&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
            <span class="s">&#39;v&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;w&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
            <span class="s">&#39;ddotroll&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39; ddotpitch&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
            <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;ddotyaw&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span> 

      <span class="n">propHis</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;propulsor.dat&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="c">#histórico Máquina</span>
      <span class="n">propHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Navio &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nome</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> <span class="s">&#39;#Manobra de Curva </span><span class="se">\</span>
<span class="s">            de Zig-Zag</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">propHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Rotações do propulsor</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">propHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#temp&#39;</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;rot&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      
      <span class="n">EtaHis</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;Eta.dat&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="c">#histórico Eta</span>
      <span class="n">EtaHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Navio &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">nome</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span>  <span class="s">&#39;#Manobra de Curva </span><span class="se">\</span>
<span class="s">            de Zig-Zag</span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">EtaHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#Eta </span><span class="se">\n</span><span class="s">#</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="n">EtaHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;#temp&#39;</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;rot&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> 
            <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      
      <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s">&#39;..&#39;</span><span class="p">)</span>
      <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s">&#39;..&#39;</span><span class="p">)</span>
      
    <span class="n">dados</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">dic</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">PosIni</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>           

    <span class="k">del</span> <span class="n">nlin</span> <span class="c">#não preciso mais</span>
    <span class="n">cont</span> <span class="o">=</span><span class="mi">0</span> <span class="c">#Contador</span>
    
    <span class="k">if</span> <span class="n">peso</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>   
      <span class="n">par</span> <span class="o">=</span>   <span class="p">(</span><span class="n">GrausDeLib</span><span class="p">,</span> <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">par</span> <span class="o">=</span> <span class="p">(</span><span class="n">GrausDeLib</span><span class="p">,</span> <span class="n">peso</span><span class="p">)</span>
    

<span class="c">#</span>
<span class="c">#   Iteração</span>
<span class="c">#</span>

    <span class="k">for</span> <span class="n">tp</span> <span class="ow">in</span> <span class="n">sp</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">t0</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>

<span class="c">###############################</span>
<span class="c">##</span>
<span class="c">##   Verificando o momento em que será realizada a mudança do leme</span>
<span class="c">##</span>
<span class="c">###############################</span>
      <span class="k">if</span> <span class="p">(((</span><span class="n">exe</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span> <span class="o">&lt;=</span> 
        <span class="o">-</span><span class="p">(</span><span class="n">proa</span> <span class="o">*</span> <span class="n">sp</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="n">exe</span><span class="o">%</span><span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="n">proa</span> <span class="o">*</span> <span class="n">sp</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span><span class="p">))):</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">MudaLemeCom</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraLeme</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
          <span class="k">if</span> <span class="p">((</span><span class="n">exe</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;port&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">exe</span> <span class="o">!=</span> <span class="mi">1</span>
            <span class="ow">and</span> <span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;starboard&#39;</span><span class="p">)):</span>
              <span class="n">dic</span><span class="p">[</span><span class="s">&#39;reach&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">erro</span>
              <span class="n">dic</span><span class="p">[</span><span class="s">&#39;ospath&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ospath</span>
              <span class="n">dic</span><span class="p">[</span><span class="s">&#39;osangle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">osa</span>
              <span class="n">dados</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dic</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        
          <span class="n">osa</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
          <span class="n">ospath</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
          <span class="n">erro</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
          <span class="n">logospath</span> <span class="o">=</span> <span class="bp">False</span>
          <span class="n">logosa</span> <span class="o">=</span> <span class="bp">False</span>
          <span class="n">exe</span> <span class="o">+=</span> <span class="mi">1</span>
          <span class="k">if</span> <span class="n">tipo</span> <span class="o">==</span><span class="s">&#39;port&#39;</span><span class="p">:</span>
            <span class="n">dic</span><span class="p">[</span><span class="s">&#39;exeNummber&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exe</span>
          <span class="k">elif</span> <span class="n">tipo</span><span class="o">==</span><span class="s">&#39;starboard&#39;</span><span class="p">:</span>
            <span class="n">dic</span><span class="p">[</span><span class="s">&#39;exeNummber&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exe</span> <span class="o">-</span> <span class="mi">1</span>
          <span class="n">dic</span><span class="p">[</span><span class="s">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tp</span> <span class="o">-</span> <span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
          <span class="n">dic</span><span class="p">[</span><span class="s">&#39;path&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
          <span class="n">dic</span><span class="p">[</span><span class="s">&#39;proa&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>

<span class="c">###############################</span>
<span class="c">##</span>
<span class="c">##   Atualizando os parâmetros</span>
<span class="c">##</span>
<span class="c">###############################</span>
      
      <span class="k">if</span> <span class="p">((</span><span class="n">exe</span><span class="o">!=</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">tipo</span> <span class="o">==</span> <span class="s">&#39;port&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">exe</span><span class="o">!=</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">tipo</span> <span class="o">==</span>
        <span class="s">&#39;starboard&#39;</span><span class="p">)):</span>
        <span class="k">if</span> <span class="p">((</span><span class="n">logospath</span> <span class="o">==</span> <span class="bp">False</span><span class="p">)</span> <span class="ow">and</span>
          <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">dic</span><span class="p">[</span><span class="s">&#39;path&#39;</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="n">ospath</span><span class="p">)):</span>
<span class="c">#(sp.sign(self.MostraPos()[1])== sp.sign(dic[&#39;path&#39;])) and</span>
          <span class="n">ospath</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">dic</span><span class="p">[</span><span class="s">&#39;path&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
          <span class="n">logospath</span> <span class="o">=</span> <span class="bp">True</span>
        
        <span class="k">if</span> <span class="p">((</span><span class="n">logosa</span> <span class="o">==</span> <span class="bp">False</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span> <span class="o">-</span> 
          <span class="n">dic</span><span class="p">[</span><span class="s">&#39;proa&#39;</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="n">osa</span><span class="p">)):</span> <span class="c">#(sp.sign(self.MostraPos()[5])==</span>
<span class="c">#sp.sign(dic[&#39;proa&#39;])) and </span>
          <span class="n">osa</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span> <span class="o">-</span> <span class="n">dic</span><span class="p">[</span><span class="s">&#39;proa&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
          <span class="n">logosa</span> <span class="o">=</span> <span class="bp">True</span>
          
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">])</span> <span class="o">-</span> <span class="nb">abs</span><span class="p">(</span><span class="n">PosIni</span><span class="p">[</span><span class="mi">5</span><span class="p">]))</span> <span class="o">&lt;</span> <span class="n">erro</span><span class="p">:</span>
          <span class="n">erro</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span> <span class="o">-</span> <span class="n">PosIni</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>            

      
  
      
      
<span class="c">#</span>
<span class="c">#                inc = Velocidades Lineares no Sistema Inecial</span>
<span class="c">#</span>
      <span class="n">MatRot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MatRot</span><span class="p">()</span>
      <span class="n">VelIn</span> <span class="o">=</span> <span class="n">MatRot</span> <span class="o">*</span> <span class="n">sp</span><span class="o">.</span><span class="n">matrix</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">])</span>

      <span class="n">PosIne</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>

<span class="c">###################################</span>

<span class="c">#################################</span>
<span class="c">##</span>
<span class="c">##  Cálculo das forças de Maneira Modular</span>
<span class="c">##</span>
<span class="c">###################################</span>
      <span class="n">ft</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">VetF</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>

<span class="c">##################################</span>
<span class="c">##################################</span>
<span class="c">##                </span>
<span class="c">##                       Guardando os parâmetros</span>
<span class="c">##                </span>
<span class="c">##################################                </span>
<span class="c">#          Velocidade Inercial</span>
      <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
        <span class="n">veloInerHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">VelIn</span><span class="p">:</span>
          <span class="n">veloInerHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.5e</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="n">veloInerHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">VelIn</span><span class="p">)</span>
        <span class="n">veloInerHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="mi">1</span><span class="p">:]</span> <span class="o">=</span> <span class="n">d</span> <span class="c">#</span>
        <span class="n">veloInerHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">tp</span> <span class="c">#</span>
<span class="c">#           Histórico Leme</span>
      <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
        <span class="n">lemeHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="n">lemeHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraLeme</span><span class="p">())</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span>
        <span class="n">lemeHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">tp</span>
        <span class="n">lemeHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraLeme</span><span class="p">()</span>
<span class="c">#           Histórico da posição</span>
      <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
        <span class="n">posHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">():</span>
          <span class="n">posHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.5e</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="n">posHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span>            
        <span class="n">temp</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">())</span>
        <span class="n">posHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="n">temp</span><span class="p">))</span>
        <span class="k">del</span> <span class="n">temp</span>
<span class="c">#           Histórico da Velocidade</span>
      <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
        <span class="n">veloHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">():</span>
          <span class="n">veloHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.5e</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="n">veloHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span> 
        <span class="n">temp</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">())</span>
        <span class="n">veloHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="n">temp</span><span class="p">))</span>
        <span class="k">del</span> <span class="n">temp</span>
<span class="c">#           Histórico das Forças </span>
      <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
          <span class="n">temp</span> <span class="o">=</span> <span class="n">ft</span>
        <span class="k">elif</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
          <span class="n">temp</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">ft</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
          <span class="n">temp</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">ft</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">fHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">temp</span><span class="p">:</span>
          <span class="n">fHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.5e</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="n">fHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>  <span class="c">#def __init__(self):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#pass</span>
    
  <span class="c">#def rk4(self, function, x, t0, dt, par = None):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Integrador runge-kutta</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#k1 = function(x, t0, par)</span>
    <span class="c">#k2 = function(x + 1./2*dt*k1, t0 + 1./2*dt, par)</span>
    <span class="c">#k3 = function(x + 1./2*dt*k2, t0 + 1./2*dt, par)</span>
    <span class="c">#k4 = function(x + dt*k3, t0 + dt, par)</span>
  
    <span class="c">#xt = x + 1./6*(k1+ 2.*k2+ 2.*k3+ k4)*dt</span>
  
    <span class="c">#return xt</span>
  
  <span class="c">#def euler(self, f, x, t0, dt, par= None ):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#&quot;&quot;&quot;      </span>
    <span class="c">#return x + f(x, t0, par)*dt</span>

  
  
<span class="c">#class navio:</span>
  <span class="c">#&quot;&quot;&quot;</span>
  <span class="c">#Classe de navios</span>
  <span class="c">#&quot;&quot;&quot;</span>
  
  <span class="c">#tipo = &#39;Escolhido de acordo com self.Tipo&#39;</span>
  <span class="c">#data = &#39;10-11-2010&#39;</span>
  <span class="c">#autor = &#39;Alex&#39;</span>
  
  <span class="c">#def __init__(self, DicionarioDerivadas, Nome = &#39;Teste&#39;, Tipo = &#39;TP&#39;):</span>
    <span class="c">#&quot;&quot;&quot;&quot;</span>
    <span class="c">#Construtor do navio</span>
    <span class="c">#__________________________</span>
    <span class="c">#Variáveis de entrada:</span>
    
    <span class="c">#Nome (string)-- Nome do Navio. Não possui relevância;</span>
    <span class="c">#Tipo (&#39;TP&#39;)-- Tipo de modelo numérico adotado para a construção do</span>
<span class="c">#Leme</span>

    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#self.nome = Nome</span>
    <span class="c">#self.vel = sp.zeros((6, 1))</span>
    <span class="c">#self.acel = sp.zeros((6, 1))</span>
    <span class="c">#self.pos = sp.zeros((6, 1))</span>
    <span class="c">#self.dic = DicionarioDerivadas</span>
    <span class="c">#self.tipo = Tipo</span>
    <span class="c">#self.integrador = inte()</span>
    <span class="c">#self.uc = sp.array(self.dic[&#39;unom&#39;])</span>
    
    <span class="c">#if Tipo == &#39;TP&#39;:</span>
      <span class="c">#self.leme = lemeTris(DicionarioDerivadas)</span>
      <span class="c">#self.casco = cascoTris(DicionarioDerivadas)</span>
      <span class="c">#self.prop = prop()</span>
    <span class="c">#elif Tipo == &#39;MARAD&#39;:</span>
      <span class="c">#self.leme = lemeMarAd(DicionarioDerivadas)</span>
      <span class="c">#self.casco = cascoMarAd(DicionarioDerivadas)</span>
      <span class="c">#self.prop = propMarAd(DicionarioDerivadas)</span>




  <span class="c">#def MostraVel(self):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Retorna a Velocidade da embarcação</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#return self.vel</span>
    
  <span class="c">#def MostraAcel(self):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Retorna a aceleração da embarcação</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#return self.acel</span>
  
  <span class="c">#def MostraLeme(self):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Retorna o leme em rad da embarcação</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#return self.leme.MostraLeme()</span>

  <span class="c">#def MostraLemeCom(self):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Retorna o leme em rad da embarcação</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#return self.leme.MostraLemeCom()</span>
  
  <span class="c">#def MostraPos(self):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Retorna a posição da embarcação</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#return self.pos</span>

  <span class="c">#def MostraRotCom(self):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Retorna a rotação comandada</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#return self.prop.MostraRotCom()</span>

  <span class="c">#def MostraRot(self):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Retorna a rotação</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#return self.prop.MostraRot()</span>

  <span class="c">#def MostraVelCom(self):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Retorna a velocidade comandada</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#return self.uc</span>
    
  <span class="c">#def MudaVelCom(self, uc):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Muda a velocidade comandada</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#self.uc  = uc.copy()</span>
    <span class="c">#self.prop.MudaVelCom(uc)</span>
    
  <span class="c">#def MudaLemeCom(self, AngLeme):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Muda o leme comandado da embarcação</span>
    <span class="c">#__________________________</span>
    <span class="c">#Variáveis de entrada:</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#temp = AngLeme.copy()</span>
    <span class="c">#self.leme.MudaLemeCom(temp)        </span>

    
  <span class="c">#def MudaVel(self, Velocidade):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Muda a velocidade da embarcação</span>
    <span class="c">#__________________________</span>
    <span class="c">#Variáveis de entrada:</span>
    <span class="c">#Velocidade -- velocidade (m/s)</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#temp = Velocidade.copy()</span>
    
    <span class="c">#self.vel = temp        </span>
    <span class="c">#self.casco.MudaVel(temp)</span>
    <span class="c">#self.leme.MudaVel(temp)</span>
    <span class="c">#self.prop.MudaVel(temp)</span>

  <span class="c">#def MudaPos(self, Posicao):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Muda a posição da embarcação </span>
    <span class="c">#__________________________</span>
    <span class="c">#Variáveis de entrada:</span>
    <span class="c">#Posição -- posição (m)</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#temp = Posicao.copy()</span>
    <span class="c">#self.pos = temp</span>
    <span class="c">#self.casco.MudaPos(temp)</span>
    <span class="c">#self.leme.MudaPos(temp)</span>
    <span class="c">#self.prop.MudaPos(temp)</span>


  <span class="c">#def MudaRotCom(self, Rot):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Muda a rotação Comandada da embarcação</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#self.prop.MudaRotCom(Rot)</span>
    
  <span class="c">#def CalcFx(self):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Calcula a força em Surge   </span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#m = self.dic[&#39;m&#39;]*(self.dic[&#39;rho&#39;]*(self.dic[&#39;lpp&#39;]**3)/2)</span>
    <span class="c">#u = self.MostraVel()[0] </span>
    <span class="c">#v = self.MostraVel()[1]</span>
    <span class="c">#p = self.MostraVel()[3]</span>
    <span class="c">#r = self.MostraVel()[5]</span>
    <span class="c">#xg = self.dic[&#39;xg&#39;]</span>
    <span class="c">#zg = self.dic[&#39;zg&#39;]</span>
    
    <span class="c">#cori = m*(v*r + xg*(r**2) -  zg*p*r) </span>
    
    <span class="c">#if self.tipo == &#39;MARAD&#39;:</span>
      <span class="c">#saida = (self.casco.Fx() + self.prop.Fx() +</span>
          <span class="c">#self.leme.Fx(self.MostraRot(),</span>
          <span class="c">#self.MostraVelCom()/self.MostraVel()[0]) + cori) </span>
    <span class="c">#elif self.tipo == &#39;TP&#39;:</span>
      <span class="c">#saida = self.casco.Fx() + self.leme.Fx() + self.prop.Fx() + cori</span>
  
    <span class="c">#return    saida</span>

  <span class="c">#def CalcFy(self):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Calcula a força em Sway</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#m = self.dic[&#39;m&#39;]*(self.dic[&#39;rho&#39;]*(self.dic[&#39;lpp&#39;]**3)/2)</span>
    <span class="c">#u = self.MostraVel()[0] </span>
    <span class="c">#v = self.MostraVel()[1]</span>
    <span class="c">#p = self.MostraVel()[3]</span>
    <span class="c">#r = self.MostraVel()[5]</span>
    <span class="c">#xg = self.dic[&#39;xg&#39;]</span>
    <span class="c">#zg = self.dic[&#39;zg&#39;]</span>
    
    <span class="c">#cori = -m*u*r</span>
  
    <span class="c">#if self.tipo == &#39;MARAD&#39;:</span>
      <span class="c">#saida = (self.casco.Fy() + self.leme.Fy(self.MostraRot()) +</span>
          <span class="c">#self.prop.Fy() + cori)</span>
    <span class="c">#elif self.tipo == &#39;TP&#39;:</span>
      <span class="c">#saida = self.casco.Fy() + self.leme.Fy() + self.prop.Fy() + cori</span>
  
    <span class="c">#return saida</span>

  <span class="c">#def CalcK(self):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Calcula o momento de Roll</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#m = self.dic[&#39;m&#39;]*(self.dic[&#39;rho&#39;]*(self.dic[&#39;lpp&#39;]**3)/2)</span>
    <span class="c">#u = self.MostraVel()[0] </span>
    <span class="c">#v = self.MostraVel()[1]</span>
    <span class="c">#p = self.MostraVel()[3]</span>
    <span class="c">#r = self.MostraVel()[5]</span>
    <span class="c">#xg = self.dic[&#39;xg&#39;]</span>
    <span class="c">#zg = self.dic[&#39;zg&#39;]</span>
    
    <span class="c">#cori = m*zg*u*r</span>
  
    <span class="c">#if self.tipo == &#39;MARAD&#39;:</span>
      <span class="c">#saida = (self.casco.K() + self.leme.K(self.MostraRot()) +</span>
          <span class="c">#self.prop.K() + cori)</span>
    <span class="c">#elif self.tipo == &#39;TP&#39;:</span>
      <span class="c">#saida = self.casco.K() + self.leme.K() + self.prop.K() + cori</span>
  
    <span class="c">#return    saida</span>

  
  <span class="c">#def CalcN(self):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Calcula o momento de  Yaw</span>
    
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#m = self.dic[&#39;m&#39;]*(self.dic[&#39;rho&#39;]*(self.dic[&#39;lpp&#39;]**3)/2)</span>
    <span class="c">#u = self.MostraVel()[0]</span>
    <span class="c">#v = self.MostraVel()[1]</span>
    <span class="c">#p = self.MostraVel()[3]</span>
    <span class="c">#r = self.MostraVel()[5]</span>
    <span class="c">#xg = self.dic[&#39;xg&#39;]</span>
    <span class="c">#zg = self.dic[&#39;zg&#39;]</span>
    
    <span class="c">#cori = -m*xg*u*r</span>

    <span class="c">#if self.tipo == &#39;MARAD&#39;:</span>
      <span class="c">#saida = (self.casco.N() + self.leme.N(self.MostraRot()) +</span>
          <span class="c">#self.prop.N() + cori)</span>
    <span class="c">#elif self.tipo == &#39;TP&#39;:</span>
      <span class="c">#saida = self.casco.N() + self.leme.N() + self.prop.N() + cori</span>
  
    <span class="c">#return saida</span>
    
  <span class="c">#def VetF(self, p=None):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Vetor de forças</span>
    <span class="c">#_________________________</span>
    <span class="c">#Variáveis de entrada:</span>
    <span class="c">#p --  tupla</span>
    <span class="c">#p[0] (integer)-- Graus de liberdade </span>
    <span class="c">#p[1] (tupla)-- Com pesos</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#if p == None:</span>
      <span class="c">#GrausDeLib =4</span>
      <span class="c">#peso = None</span>
    <span class="c">#elif len(p)==1:</span>
      <span class="c">#GrausDeLib =p[0]</span>
      <span class="c">#peso = None</span>
    <span class="c">#elif len(p)==2:</span>
      <span class="c">#GrausDeLib =p[0]</span>
      <span class="c">#peso = p[1]</span>
      
    <span class="c">#if peso == None:</span>
      <span class="c">#if GrausDeLib == 4:</span>
        <span class="c">#saida = sp.array([self.CalcFx(), self.CalcFy(),</span>
                <span class="c">#self.CalcK(), self.CalcN()])  </span>
      <span class="c">#elif GrausDeLib == 3:</span>
        <span class="c">#saida = sp.array([self.CalcFx(), self.CalcFy(),</span>
<span class="c">#self.CalcN()])</span>
    <span class="c">#else:</span>
      <span class="c">#lemearq = self.MostraLeme()</span>
      <span class="c">#velarq = self.MostraVel()</span>
      <span class="c">#uc = self.MostraVelCom()</span>
      
      <span class="c">#####################</span>
      
      <span class="c">#self.leme.MudaLemeDir(sp.array(0.))</span>
      <span class="c">#self.MudaVelCom(velarq[0]) #condição eta=1</span>
      
<span class="c">###            ####################</span>
<span class="c">###            Aquilo que depende somente de u</span>
<span class="c">###</span>
<span class="c">###            ####################</span>
      
      <span class="c">#veltemp = sp.zeros((6, 1))</span>
      <span class="c">#veltemp[0] = velarq[0]</span>
      <span class="c">#self.MudaVel(veltemp)</span>
      
      <span class="c">#fu = self.VetF((GrausDeLib, ))</span>

      <span class="c">#####################</span>
      <span class="c">#veltemp = sp.zeros((6, 1))</span>
      <span class="c">#veltemp[0] = velarq[0]</span>
      <span class="c">#veltemp[1] = velarq[1]</span>
      <span class="c">#self.MudaVel(veltemp)</span>
      
      <span class="c">## leme = 0 e eta = 1</span>

      <span class="c">#fbeta = self.VetF((GrausDeLib, )) - fu</span>
      <span class="c">#it = 0</span>
      <span class="c">#fbeta1 = fbeta.copy()</span>

      <span class="c">#for arg in peso[0]:</span>

        <span class="c">#fbeta[it] = arg* fbeta[it]</span>

        <span class="c">#it +=1 </span>
      <span class="c">#####################</span>

      
      
      <span class="c">#veltemp = sp.zeros((6, 1))</span>
      <span class="c">#veltemp[5] = velarq[5]</span>
      <span class="c">#veltemp[0] = velarq[0]            </span>
      <span class="c">#self.MudaVel(veltemp)</span>
      
      <span class="c">#fr = self.VetF((GrausDeLib, )) - fu</span>
      <span class="c">#fr1 = fr.copy()</span>

      <span class="c">#it = 0</span>
      <span class="c">#for arg in peso[1]:</span>
        <span class="c">#fr[it] = arg* fr[it]</span>
        <span class="c">#it +=1                </span>

      <span class="c">#####################</span>
      
      
      
      <span class="c">#self.leme.MudaLemeDir(lemearq)</span>
      <span class="c">#veltemp = sp.zeros((6, 1))</span>
      <span class="c">#veltemp[0] = velarq[0]</span>
      <span class="c">#self.MudaVel(veltemp)</span>
      
      <span class="c">#fleme = self.VetF((GrausDeLib, ))  - fu</span>
      
      <span class="c">#fleme1 = fleme.copy()</span>

      <span class="c">#it = 0            </span>
      <span class="c">#for arg in peso[2]:</span>
        <span class="c">#fleme[it] = arg* fleme[it]</span>
        <span class="c">#it +=1     </span>
      

      <span class="c">#####################</span>
      
      <span class="c">#self.MudaVel(velarq)</span>
      <span class="c">#self.MudaVelCom(uc)</span>
      
      <span class="c">#fbetarl = self.VetF((GrausDeLib, )) - (fbeta1 + fr1 + fleme1)</span>
      <span class="c">#it = 0</span>
    
      <span class="c">#for arg in peso[3]:</span>
        <span class="c">#fbetarl[it] = arg* fbetarl[it]</span>
        <span class="c">#it +=1                            </span>
      <span class="c">#del it </span>
      
      
      
      <span class="c">#saida = fbeta + fr + fleme + fbetarl</span>
    
    <span class="c">#return saida</span>

  <span class="c">#def H (self, GrausDeLib=4):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Matriz de massa menos matriz de massa adicional</span>
    <span class="c">#_________________________</span>
    <span class="c">#Variáveis de entrada:</span>
    
    <span class="c">#GrausDeLib (integer)-- Graus de liberdade </span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#H = None</span>
    <span class="c">#H = self.casco.M(GrausDeLib) - self.casco.Ma(GrausDeLib)</span>
    
    <span class="c">#return  sp.mat(H)</span>

  <span class="c">#def MatRot(self, p=None):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Retorna a matrix de rotação de do referêncial solidárial para o </span>
    <span class="c">#inercial</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#if p== None:</span>
      <span class="c">#roll= self.MostraPos()[3]</span>
      <span class="c">#pitch = self.MostraPos()[4]</span>
      <span class="c">#yaw = self.MostraPos()[5]</span>
    <span class="c">#else:</span>
      <span class="c">#roll= p[0]</span>
      <span class="c">#pitch = p[1]</span>
      <span class="c">#yaw = p[2]</span>
      
    <span class="c">#Rot = sp.array([[sp.cos(yaw)*sp.cos(pitch), </span>
    <span class="c">#-sp.sin(yaw)*sp.cos(roll) +</span>
<span class="c">#sp.cos(yaw)*sp.sin(pitch)*sp.sin(roll), </span>
    <span class="c">#sp.sin(yaw)*sp.sin(roll) + sp.cos(yaw)*sp.cos(roll)*sp.sin(pitch)</span>
<span class="c">#], </span>
    <span class="c">#[sp.sin(yaw)*sp.cos(pitch), </span>
    <span class="c">#sp.cos(yaw)*sp.cos(roll) + sp.sin(roll)*sp.sin(pitch)*sp.sin(yaw), </span>
    <span class="c">#-sp.cos(yaw)*sp.sin(roll) + sp.sin(yaw)*sp.cos(roll)*sp.sin(pitch)</span>
<span class="c">#], </span>
    <span class="c">#[-sp.sin(pitch), sp.cos(pitch)*sp.sin(roll), </span>
    <span class="c">#sp.cos(pitch)*sp.cos(roll)] ])</span>
    
    <span class="c">#Rot.shape  = (3, 3)</span>
    <span class="c">#Rot= sp.matrix(Rot)</span>
    <span class="c">#return Rot</span>

  <span class="c">#def f2 (self, VetF, H):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Calcula o valor de f(x) na equação</span>
    <span class="c">#x&#39; = f(x)</span>
    <span class="c">#onde x são é  o vetor de velocidades no sistema solidário</span>
    <span class="c">#_________________________</span>
    <span class="c">#Variáveis de entrada:</span>
    
    <span class="c">#GrausDeLib (integer)-- Graus de liberdade </span>
    <span class="c">#&quot;&quot;&quot;</span>
    
    <span class="c">#GrausDeLib = len(VetF)</span>
      
    <span class="c">#if GrausDeLib == 4:</span>
      <span class="c">#a=  sp.zeros((6, 6))</span>
      <span class="c">#a[5, 5] = 1.</span>
      <span class="c">#a[4, 4] = 1.</span>
      <span class="c">#a[:4, :4]= H</span>

      <span class="c">#b=  sp.zeros((6, 1))</span>
      <span class="c">#b [4, 0] = self.vel[3]</span>
      <span class="c">#b [5, 0] = self.vel[5]*sp.cos(self.MostraPos()[3])</span>
      <span class="c">#b[:4, :]= VetF</span>
    <span class="c">#elif GrausDeLib == 3:</span>
      <span class="c">#a=  sp.zeros((4, 4))</span>
      <span class="c">#a[3, 3] = 1.</span>
      <span class="c">#a[:3, :3]= H</span>

      <span class="c">#b=  sp.zeros((4, 1))</span>
      <span class="c">#b[:3, :]= VetF</span>
      <span class="c">#b[3, 0] = self.MostraVel()[5]</span>
    
    <span class="c">#saida = linalg.solve(a, b ) </span>

    <span class="c">#return saida</span>
    
  <span class="c">#def f(self, velocidade=None, t=None, p=(4, )):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#O p é uma tupla com o valor dos graus de liberdade</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#GrausDeLib = p[0]</span>
    <span class="c">#if velocidade !=None:</span>
      <span class="c">#velarq = self.MostraVel()</span>
      <span class="c">#posarq = self.MostraPos()</span>
      <span class="c">#veltemp = sp.zeros((6, 1))</span>
      <span class="c">#postemp =  sp.zeros((6, 1))</span>
      <span class="c">#if GrausDeLib==3:</span>
        <span class="c">#veltemp[:2] = velocidade[:2]</span>
        <span class="c">#veltemp[5] = velocidade[2]</span>
        <span class="c">#postemp[5] = velocidade[3]</span>
      <span class="c">#elif GrausDeLib==4:</span>
        <span class="c">#veltemp[:2] = velocidade[:2]</span>
        <span class="c">#veltemp[3] = velocidade[2]</span>
        <span class="c">#veltemp[5] = velocidade[3]</span>
        <span class="c">#postemp[3] = velocidade[4]</span>
        <span class="c">#postemp[5] = velocidade[5]</span>
      <span class="c">#self.MudaVel(veltemp)</span>
      <span class="c">#self.MudaPos(postemp)</span>
    
    <span class="c">#if GrausDeLib == 4:</span>
      <span class="c">#a=  sp.zeros((6, 6))</span>
      <span class="c">#a[5, 5] = 1.</span>
      <span class="c">#a[4, 4] = 1.</span>
      <span class="c">#a[:4, :4]= self.H(GrausDeLib)</span>

      <span class="c">#b=  sp.zeros((6, 1))</span>
      <span class="c">#b [4, 0] = self.vel[3]</span>
      <span class="c">#b [5, 0] = self.vel[5]*sp.cos(self.MostraPos()[3])</span>
      <span class="c">#b[:4, :]= self.VetF(p)</span>
    <span class="c">#elif GrausDeLib == 3:</span>
      <span class="c">#a=  sp.zeros((4, 4))</span>
      <span class="c">#a[3, 3] = 1.</span>
      <span class="c">#a[:3, :3]= self.H(GrausDeLib)</span>

      <span class="c">#b=  sp.zeros((4, 1))</span>
      <span class="c">#b[:3, :]= self.VetF(p) </span>
      <span class="c">#b[3, 0] = self.MostraVel()[5]</span>
    
    <span class="c">#saida = linalg.solve(a, b) </span>
    
    <span class="c">#if velocidade !=None:</span>
      <span class="c">#self.MudaVel(velarq)</span>
      <span class="c">#self.MudaPos(posarq)</span>
    <span class="c">#return saida    </span>
  <span class="c">#def fvein(self, x, t, p):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#x = sp.array(u, v , w)</span>
    <span class="c">#p = (  roll, pitch, yaw)</span>
    <span class="c">#&quot;&quot;&quot;</span>
  
    <span class="c">#return sp.array(self.MatRot(p[0])*p[1])</span>
    
  <span class="c">#def simula(self, met=&#39;euler&#39;, t0=0., dt=0.5, t=100., GrausDeLib=4,</span>
        <span class="c">#velocidade=None, tipo=&#39;ZigZag&#39;, leme=sp.array(20.),</span>
        <span class="c">#proa=sp.array(20.), RotCom =sp.array(1),osa=sp.array(0.05),</span>
        <span class="c">#ospath=sp.array(150), erro=sp.array(0.05),</span>
        <span class="c">#errotf=sp.array(0.05), errotd=sp.array(0.05)):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Simulador de manobras padrão</span>
    <span class="c">#_________________________</span>
    <span class="c">#Variáveis de entrada:</span>
    
    <span class="c">#GrausDeLib (integer)-- Graus de liberdade;        </span>
    <span class="c">#met -- Método de integração. Default- Euler;</span>
    <span class="c">#t0 -- Tempo inicial;</span>
    <span class="c">#dt -- Passo no tempo;</span>
    <span class="c">#t -- Tempo final </span>
    <span class="c">#tipo - tipo de manobra simulada. Zig-Zag10/10 e Curva_de_Giro_port</span>
<span class="c">#ou </span>
    <span class="c">#Curva_de_Giro_starboard . Default -Zig-Zag</span>
    
    <span class="c">#__________________________</span>
    <span class="c">#Saída:</span>
    
    <span class="c">#Tupla de sp.array</span>
    
    <span class="c">#(veloHis, posHis, acelHis, fHis, veloInerHis, lemeHis)</span>
    
    <span class="c">#Em cada elemento da tupla:</span>
    <span class="c">#A primeira coluna é o passo de tempo e as demais são as variáveis</span>
    
    <span class="c">#veloHis -- histórico de velocidades;</span>
    <span class="c">#posHis -- histórico de posições</span>
    <span class="c">#acelHis --- histórico de acelerações</span>
    <span class="c">#fHis -- histórico de forças </span>
    <span class="c">#veloInerHis -- histórico de velocidades no sistema inercial</span>
    <span class="c">#lemeHis -- histórico do comando de leme</span>
    <span class="c">#&quot;&quot;&quot;</span>

<span class="c">##</span>
<span class="c">##        Tipo de Simulação a ser realizada:</span>
<span class="c">##</span>
    <span class="c">#self.MudaPos( sp.array([  [0.], [0.], [0.], [0.], [0.], [0.] ]))</span>
    <span class="c">#self.MudaVel(sp.array([  [self.dic[&#39;unom&#39;]], [0.], [0.], [0.], [0.],</span>
    <span class="c">#[0.] ]))</span>
    <span class="c">#self.MudaRotCom(RotCom)</span>
    <span class="c">#self.MudaVelCom(self.dic[&#39;unom&#39;])</span>
<span class="c">##Log é o parâmetro que indica quando a simulação armazenou os dados do</span>
<span class="c">##relatório</span>
    <span class="c">#if tipo == &#39;Curva_de_Giro_port&#39;:</span>
      <span class="c">#self.MudaLemeCom(sp.array(leme*sp.pi/180))</span>
      <span class="c">#log = False</span>
    <span class="c">#elif tipo == &#39;Curva_de_Giro_starboard&#39;:</span>
      <span class="c">#self.MudaLemeCom(sp.array(-leme*sp.pi/180))</span>
      <span class="c">#log = False</span>
    <span class="c">#elif tipo == &#39;ZigZag&#39;:</span>
      <span class="c">#self.MudaLemeCom(sp.array(leme*sp.pi/180))</span>
      <span class="c">#exe = 0</span>
    
    

<span class="c">################################</span>
<span class="c">###</span>
<span class="c">###   Dados relacionados a curva de zizag</span>
<span class="c">###</span>
<span class="c">################################</span>
      <span class="c">#if (tipo == &#39;ZigZag&#39; and (((exe%2 == 0) and self.MostraPos()[5]</span>
<span class="c">#&lt;=</span>
        <span class="c">#-(proa*sp.pi/180) ) or (exe%2 != 0 and self.MostraPos()[5]</span>
<span class="c">#&gt;=</span>
        <span class="c">#(proa*sp.pi/180) ))):</span>
        <span class="c">#self.MudaLemeCom(self.MostraLeme()*(-1))</span>
        <span class="c">#if exe!=0:</span>
          <span class="c">#dic[&#39;reach&#39;] = erro</span>
          <span class="c">#dic[&#39;ospath&#39;] = ospath</span>
          <span class="c">#dic[&#39;osangle&#39;] = abs(osa - dic[&#39;proa&#39;])</span>
          <span class="c">#dados.append(dic.copy())</span>

        <span class="c">#exe += 1</span>
        <span class="c">#dic[&#39;exeNummber&#39;] = exe</span>
        <span class="c">#dic[&#39;time&#39;] = tp - sp.array(dt)</span>
        <span class="c">#dic[&#39;path&#39;] = self.MostraPos()[1]</span>
        <span class="c">#dic[&#39;proa&#39;] = self.MostraPos()[5]</span>
    
      <span class="c">#if tipo==&#39;ZigZag&#39; and exe!=0:</span>
        <span class="c">#if abs(self.MostraPos()[1]- dic[&#39;path&#39;])&gt;ospath:</span>
          <span class="c">#ospath = abs(self.MostraPos()[1]- dic[&#39;path&#39;])  </span>
        <span class="c">#if abs(self.MostraPos()[5])&gt;abs(osa):</span>
          <span class="c">#osa = self.MostraPos()[5]</span>
        <span class="c">#if abs(self.MostraPos()[5] - PosIni[5]) &lt; erro:</span>
          <span class="c">#erro = abs(self.MostraPos()[5] - PosIni[5])            </span>

        
      
      

<span class="c">################################</span>
<span class="c">###</span>
<span class="c">###   Dados relacionados a curva de Giro</span>
<span class="c">###</span>
<span class="c">################################            </span>
      <span class="c">#if ((tipo == &#39;Curva_de_Giro_port&#39; or</span>
        <span class="c">#tipo == &#39;Curva_de_Giro_starboard&#39;) and not log):</span>
        
        <span class="c">#if (abs(abs(self.MostraPos()[5] - PosIni[5]) -</span>
          <span class="c">#(sp.array(90)*sp.pi/180)) &lt;= errotf):</span>
          <span class="c">#errotf = (abs(abs(self.MostraPos()[5] - PosIni[5]) -</span>
              <span class="c">#(sp.array(90)*sp.pi/180)))</span>
          <span class="c">#dic[&#39;transfer&#39;] = abs(self.MostraPos()[1] - PosIni[1])</span>
          <span class="c">#dic[&#39;advance&#39;] = abs(self.MostraPos()[0] - PosIni[0])</span>
        <span class="c">#if abs(abs(self.MostraPos()[5] - PosIni[5]) - sp.pi) &lt;= errotd:</span>
          <span class="c">#errotd = abs(abs(self.MostraPos()[5] - PosIni[5]) - sp.pi)</span>
          <span class="c">#dic[&#39;taticalDiameter&#39;] = abs(self.MostraPos()[1] - \</span>
<span class="c">#PosIni[1])</span>
        
        <span class="c">#if abs(self.MostraPos()[5] - PosIni[5]) &gt; sp.pi :</span>
          <span class="c">#log = True</span>
          <span class="c">#dados.append(dic)</span>


      <span class="c">#Rot = self.MatRot()</span>
      
<span class="c">##</span>
<span class="c">##                inc = Velocidades Lineares no Sistema Inecial</span>
<span class="c">##</span>
      <span class="c">#VelIn = Rot*sp.matrix(self.vel[0:3])</span>

      <span class="c">#PosIne = self.MostraPos()[0:3]</span>
      
<span class="c">###################################</span>
<span class="c">##                </span>
<span class="c">##                       Guardando os parâmetros</span>
<span class="c">##                </span>
<span class="c">###################################                </span>
<span class="c">##          Velocidade Inercial      </span>
      <span class="c">#d= sp.hstack(VelIn)</span>
      <span class="c">#veloInerHis[cont, 1:] = d #</span>
      <span class="c">#veloInerHis[cont, 0] = tp #</span>
<span class="c">##           Histórico Leme</span>
      <span class="c">#lemeHis[cont, 0] = tp</span>
      <span class="c">#lemeHis[cont, 1] = self.MostraLeme()</span>
<span class="c">##           Histórico da posição</span>
      <span class="c">#temp = sp.hstack(self.MostraPos())</span>
      <span class="c">#posHis[cont, :] = sp.hstack((tp, temp))</span>

<span class="c">##           Histórico da Velocidade</span>
      <span class="c">#temp = sp.hstack(self.MostraVel())</span>
      <span class="c">#veloHis[cont, :] = sp.hstack((tp, temp))</span>

<span class="c">##           Histórico das Forças </span>
      <span class="c">#temp =sp.hstack(sp.array(self.VetF(GrausDeLib)))</span>
      <span class="c">#if GrausDeLib == 4:</span>
        <span class="c">#fHis[cont, :]  = sp.hstack((tp, temp))</span>
      <span class="c">#elif GrausDeLib == 3:</span>
        <span class="c">#fHis[cont, :3]  = sp.hstack((tp, temp[:2]))</span>
        <span class="c">#fHis[cont, 4]  = temp[2]</span>

<span class="c">##           Histórico Propulsor</span>
      <span class="c">#propHis[cont, :] = sp.hstack((tp, self.MostraRot()))</span>

<span class="c">##           Histórico das Acelerações </span>
      <span class="c">#Acel = self.f(GrausDeLib)</span>
      
      <span class="c">#if GrausDeLib == 4:</span>
        <span class="c">#vetor = sp.zeros((6, 1))</span>
        <span class="c">#vetor[:2] = Acel[:2]</span>
        <span class="c">#vetor[3] = Acel[2]</span>
        <span class="c">#vetor [5] = Acel[3]</span>
      <span class="c">#elif GrausDeLib == 3:</span>
        <span class="c">#vetor = sp.zeros((6, 1))</span>
        <span class="c">#vetor[:2] = Acel[:2]</span>
        <span class="c">#vetor [5] = Acel[2]</span>
      <span class="c">#acelHis[cont, :] = sp.hstack((tp, sp.hstack(vetor)))           </span>



      <span class="c">#del temp </span>
<span class="c">###############################</span>
<span class="c">##</span>
<span class="c">##    Criação de vetor de graus de liberdade</span>
<span class="c">##</span>
<span class="c">###############################</span>
      <span class="c">#if GrausDeLib == 4:</span>
        <span class="c">#xIn = sp.zeros([6, 1])</span>
        
        <span class="c">#xIn [0] = self.MostraVel()[0]</span>
        <span class="c">#xIn [1] = self.MostraVel()[1]</span>
        <span class="c">#xIn [2] = self.MostraVel()[3]</span>
        <span class="c">#xIn [3] = self.MostraVel()[5]</span>
        <span class="c">#xIn [4] = self.MostraPos()[3]</span>
        <span class="c">#xIn [5] = self.MostraPos()[5]</span>
      <span class="c">#elif  GrausDeLib == 3:</span>
        <span class="c">#xIn = sp.zeros([4, 1])</span>
        <span class="c">#xIn [0] = self.MostraVel()[0]</span>
        <span class="c">#xIn [1] = self.MostraVel()[1]</span>
        <span class="c">#xIn [2] = self.MostraVel()[5]</span>
        <span class="c">#xIn [3] = self.MostraPos()[5]         </span>
<span class="c">###################################</span>
<span class="c">##                </span>
<span class="c">##                      Integração da Aceleração solidária</span>
<span class="c">##                </span>
<span class="c">###################################</span>
      <span class="c">#if met == &#39;euler&#39;:</span>
        <span class="c">#xIn =  self.integrador.euler(Acel, xIn, dt )</span>
      <span class="c">#elif met ==&#39;rk4&#39;:</span>
        <span class="c">#xIn = self.integrador.rk4(self.facel, dt, tp, xIn)</span>
      
<span class="c">###################################</span>
      <span class="c">#if GrausDeLib == 4:</span>
        <span class="c">#x = sp.zeros((6, 1))</span>
        <span class="c">#x[0] = xIn[0] </span>
        <span class="c">#x[1] = xIn[1] </span>
        <span class="c">#x[3] = xIn[2]</span>
        <span class="c">#x[5] = xIn[3]</span>
      <span class="c">#elif GrausDeLib==3:</span>
        <span class="c">#x = sp.zeros((6, 1))</span>
        <span class="c">#x[0] = xIn[0] </span>
        <span class="c">#x[1] = xIn[1] </span>
        <span class="c">#x[5] = xIn[2]                </span>
      <span class="c">#self.MudaVel(x)               </span>

      <span class="c">#del x</span>
<span class="c">###################################</span>
<span class="c">###                </span>
<span class="c">###                       Integração da velocidade inercial</span>
<span class="c">###                </span>
<span class="c">####################################</span>
      <span class="c">#posfutura = sp.zeros((6, 1))</span>
      <span class="c">#posfutura[:3] = self.integrador.euler(VelIn, PosIne, dt)</span>
      
<span class="c">###################################</span>
      <span class="c">#if GrausDeLib== 4:</span>
        <span class="c">#posfutura[3] = xIn[4]</span>
        <span class="c">#posfutura[5] = xIn[5]</span>
      <span class="c">#elif GrausDeLib== 3:</span>
        <span class="c">#posfutura[5] = xIn[3]</span>
        
      <span class="c">#self.MudaPos(posfutura)</span>
      <span class="c">#cont += 1</span>
      <span class="c">#del posfutura</span>
      
      <span class="c">#self.prop.MudaRot(tp)</span>
      <span class="c">#self.leme.MudaLeme(tp)</span>

    <span class="c">#return (veloHis, posHis, acelHis, fHis, veloInerHis, lemeHis,</span>
<span class="c">#propHis, </span>
        <span class="c">#dados)</span>
    
    
  <span class="c">#def getCurvaGiro(self, peso=None, met=&#39;euler&#39;, t0=0., dt=0.5, t=100.,</span>
          <span class="c">#GrausDeLib=3, tipo=&#39;port&#39;, leme=sp.array(20.),</span>
          <span class="c">#RotCom=None, VelCom= None, Vel=None, Eta=&#39;vel&#39;,</span>
          <span class="c">#PosIne=sp.array([[0.], [0.], [0.], [0.], [0.], [0.] ]),</span>
          <span class="c">#errotf=sp.array(0.05), errotd=sp.array(0.05),</span>
          <span class="c">#errosr=sp.array(0.001), saida=&#39;txt&#39;):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#&quot;&quot;&quot;</span>

    <span class="c">#if RotCom == None:</span>
      <span class="c">#RotCom = self.dic[&#39;rotnom&#39;]</span>
    <span class="c">#if VelCom == None:</span>
      <span class="c">#VelCom = self.dic[&#39;unom&#39;]</span>
    <span class="c">#if Vel ==  None:</span>
      <span class="c">#Vel = sp.array([  [self.dic[&#39;unom&#39;]], [0.], [0.], [0.], [0.],</span>
<span class="c">#[0.]</span>
<span class="c">#])</span>
    
    <span class="c">#self.MudaPos( PosIne)</span>
    <span class="c">#self.MudaVel(Vel)</span>
    <span class="c">#self.MudaRotCom(RotCom)</span>
    <span class="c">#self.MudaVelCom(VelCom)</span>

<span class="c">##Log é o parâmetro que indica quando a simulação armazenou os dados do</span>
<span class="c">##relatório</span>
    <span class="c">#if tipo == &#39;port&#39;:</span>
      <span class="c">#self.MudaLemeCom(sp.array(leme*sp.pi/180))</span>
      <span class="c">#log = False</span>
      <span class="c">#log1 = False</span>
    <span class="c">#elif tipo == &#39;starboard&#39;:</span>
      <span class="c">#self.MudaLemeCom(sp.array(-leme*sp.pi/180))</span>
      <span class="c">#log = False</span>
      <span class="c">#log1 = False</span>
<span class="c">##</span>
<span class="c">##   Criando espaço na memória para armazenar os parâmetros da curva</span>
<span class="c">##</span>
    <span class="c">#nlin = len(sp.arange(t0, t, dt)) #Número de linhas das colunas a serem</span>
<span class="c">##criadas</span>
    <span class="c">#if saida == &#39;mem&#39;:</span>
      <span class="c">#lemeHis = sp.zeros((nlin, 2)) #historico do leme</span>
      <span class="c">#veloHis = sp.zeros((nlin, 7)) #histórico da velocidade</span>
      <span class="c">#veloInerHis = sp.zeros((nlin, 4))#histórico da velocidade no</span>
<span class="c">##sistema inercial Verificar depois a necessidade</span>
      <span class="c">#posHis =  sp.zeros([nlin, 7]) #histórico da posição no sistema</span>
<span class="c">##inercial</span>
      <span class="c">#fHis     = sp.zeros((nlin, 5)) #histórico de forças</span>
      <span class="c">#acelHis = sp.zeros((nlin, 7)) #histórico de acelerações</span>
      <span class="c">#propHis = sp.zeros((nlin, 2)) #histórico Máquina</span>
      <span class="c">#EtaHis = sp.zeros((nlin, 2)) #histórico Eta</span>
      <span class="c">#betaHis =  sp.zeros((nlin, 2)) #histórico beta</span>
    <span class="c">#elif saida == &#39;txt&#39;:</span>
      <span class="c">#os.makedirs(&#39;./saida/CurvaGiro&#39;)</span>
      <span class="c">#os.chdir(&#39;./saida/CurvaGiro&#39;)</span>
      <span class="c">#lemeHis = open(&#39;leme.dat&#39;, &#39;w&#39;)#historico do leme</span>
      <span class="c">#lemeHis.write(&#39;#Navio &#39; + self.nome + &#39;\n&#39; +  </span>
            <span class="c">#&#39;#Manobra de Curva de Giro\n#\n&#39;) </span>
      <span class="c">#lemeHis.write(&#39;#Valor do leme em rad\n&#39;)</span>
      <span class="c">#lemeHis.write(&#39;#temp&#39;.center(5) + &#39; &#39; + &#39;leme&#39;.rjust(8) + &#39; &#39; +</span>
            <span class="c">#&#39;\n&#39;)</span>
      
      <span class="c">#veloHis = open(&#39;velo.dat&#39;, &#39;w&#39;) #histórico da velocidade</span>
      <span class="c">#veloHis.write(&#39;#Navio &#39; + self.nome + &#39;\n&#39; + </span>
            <span class="c">#&#39;#Manobra de Curva de Giro\n#\n&#39;)</span>
      <span class="c">#veloHis.write(&#39;#Velocidade Sistema Solidário \n#\n&#39;)</span>
      <span class="c">#veloHis.write(&#39;#temp&#39;.center(5) + &#39; &#39; + &#39;u&#39;.rjust(11)  + &#39; &#39; +</span>
            <span class="c">#&#39;v&#39;.rjust(11)  + &#39; &#39; + &#39;w&#39;.rjust(11)  + &#39; &#39; + </span>
            <span class="c">#&#39;dot roll&#39;.rjust(11) + &#39; &#39; + &#39;dot pitch&#39;.rjust(11)</span>
<span class="c">#+ </span>
            <span class="c">#&#39; &#39; + &#39;dot yaw&#39;.rjust(11) + &#39; &#39; + &#39;\n&#39;) </span>
      
      <span class="c">#veloInerHis = open(&#39;veloiner.dat&#39;, &#39;w&#39;)#histórico da velocidade no</span>
<span class="c">##sistema inercial Verificar depois a necessidade</span>
      <span class="c">#veloInerHis.write(&#39;#Navio &#39; + self.nome + &#39;\n&#39; +  </span>
              <span class="c">#&#39;#Manobra de Curva de Giro\n#\n&#39;)</span>
      <span class="c">#veloInerHis.write(&#39;#Velocidade Inercial\n#\n&#39;)</span>
      <span class="c">#veloInerHis.write(&#39;#temp&#39;.center(5) + &#39; &#39; + &#39;u&#39;.rjust(11)  + &#39; &#39; +</span>
              <span class="c">#&#39;v&#39;.rjust(11) + &#39; &#39; + &#39;r&#39;.rjust(11) + &#39;\n&#39;) </span>

      <span class="c">#posHis =  open(&#39;pos.dat&#39;, &#39;w&#39;)#histórico da posição no sistema</span>
<span class="c">##inercial</span>
      <span class="c">#posHis.write(&#39;#Navio &#39; + self.nome + &#39;\n&#39; +  </span>
            <span class="c">#&#39;#Manobra de Curva de Giro\n#\n&#39;)</span>
      <span class="c">#posHis.write(&#39;#Posição e Orientação\n#\n&#39;)</span>
      <span class="c">#posHis.write(&#39;#temp&#39;.center(5) + &#39; &#39; + &#39;x&#39;.rjust(11)  + &#39; &#39; +</span>
            <span class="c">#&#39;y&#39;.rjust(11)  + &#39; &#39; + &#39;z&#39;.rjust(11)  + &#39; &#39; +</span>
            <span class="c">#&#39;roll&#39;.rjust(11) + &#39; &#39; + &#39;pitch&#39;.rjust(11)  + &#39; &#39; +</span>
            <span class="c">#&#39;yaw&#39;.rjust(11)  + &#39; &#39; + &#39;\n&#39;) </span>

      <span class="c">#fHis     = open(&#39;forcas.dat&#39;, &#39;w&#39;) #histórico de forças</span>
      <span class="c">#fHis.write(&#39;#Navio &#39; + self.nome + &#39;\n&#39; + </span>
          <span class="c">#&#39;#Manobra de Curva de Giro\n#\n&#39;)</span>
      <span class="c">#fHis.write(&#39;#Forças e Momentos\n#\n&#39;)</span>
      <span class="c">#fHis.write(&#39;#temp&#39;.center(5) + &#39; &#39; + &#39;X&#39;.rjust(11)  + &#39; &#39; +</span>
          <span class="c">#&#39;Y&#39;.rjust(11)  + &#39; &#39; + &#39;K&#39;.rjust(11)  + &#39; &#39; +</span>
          <span class="c">#&#39;N&#39;.rjust(11) + &#39; &#39; + &#39;\n&#39;) </span>
      
      <span class="c">#acelHis = open(&#39;acel.dat&#39;, &#39;w&#39;) #histórico de acelerações</span>
      <span class="c">#acelHis.write(&#39;#Navio &#39; + self.nome + &#39;\n&#39; +  </span>
            <span class="c">#&#39;#Manobra de Curva de Giro\n#\n&#39;)</span>
      <span class="c">#acelHis.write(&#39;#Aceleração\n#\n&#39;)</span>
      <span class="c">#acelHis.write(&#39;#temp&#39;.center(5) + &#39; &#39; + &#39;u&#39;.rjust(11)  + &#39; &#39; +</span>
            <span class="c">#&#39;v&#39;.rjust(11)  + &#39; &#39; + &#39;w&#39;.rjust(11)  + &#39; &#39; +</span>
            <span class="c">#&#39;ddotroll&#39;.rjust(11) + &#39; &#39; + &#39;ddotpitch&#39;.rjust(11)</span>
<span class="c">#+              &#39; &#39; + &#39;ddotyaw&#39;.rjust(11)  + &#39; &#39; + &#39;\n&#39;) </span>

      <span class="c">#propHis = open(&#39;propulsor.dat&#39;, &#39;w&#39;) #histórico Máquina</span>
      <span class="c">#propHis.write(&#39;#Navio &#39; + self.nome + &#39;\n&#39; + </span>
            <span class="c">#&#39;#Manobra de Curva de Giro\n#\n&#39;)</span>
      <span class="c">#propHis.write(&#39;#Rotações do propulsor\n#\n&#39;)</span>
      <span class="c">#propHis.write(&#39;#temp&#39;.center(5) + &#39; &#39; + &#39;rot&#39;.rjust(8) + &#39;\n&#39;)</span>
      
      <span class="c">#EtaHis = open(&#39;Eta.dat&#39;, &#39;w&#39;) #histórico Eta</span>
      <span class="c">#EtaHis.write(&#39;#Navio &#39; + self.nome + &#39;\n&#39; +  </span>
            <span class="c">#&#39;#Manobra de Curva de Giro\n#\n&#39;)</span>
      <span class="c">#EtaHis.write(&#39;#Eta \n#\n&#39;)</span>
      <span class="c">#EtaHis.write(&#39;#temp&#39;.center(5) + &#39; &#39; + &#39;rot&#39;.rjust(8) + &#39; &#39; +</span>
<span class="c">#&#39;\n&#39;)</span>


      <span class="c">#betaHis = open(&#39;beta.dat&#39;, &#39;w&#39;) #histórico Eta</span>
      <span class="c">#betaHis.write(&#39;#Navio &#39; + self.nome + &#39;\n&#39; +  </span>
            <span class="c">#&#39;#Manobra de Curva de Giro\n#\n&#39;)</span>
      <span class="c">#betaHis.write(&#39;#Beta \n#\n&#39;)</span>
      <span class="c">#betaHis.write(&#39;#temp&#39;.center(5) + &#39; &#39; + &#39;rot&#39;.rjust(8) + &#39; &#39; +</span>
            <span class="c">#&#39;\n&#39;)</span>
      
      <span class="c">#os.chdir(&#39;..&#39;)</span>
      <span class="c">#os.chdir(&#39;..&#39;)</span>
    
    <span class="c">#dados = []</span>
    <span class="c">#dic = {}</span>
    <span class="c">#PosIni = self.MostraPos().copy()           </span>

    <span class="c">#del nlin #não preciso mais</span>
    <span class="c">#cont =0 #Contador</span>
    
    <span class="c">#if peso == None:   </span>
      <span class="c">#par =   (GrausDeLib, )</span>
    <span class="c">#else:</span>
      <span class="c">#par = (GrausDeLib, peso)</span>
<span class="c">##</span>
<span class="c">##   Iteração</span>
<span class="c">##</span>

    <span class="c">#for tp in sp.arange(t0, t, dt):</span>
      <span class="c">#if not log1:</span>
        <span class="c">#if cont == 0:</span>
          <span class="c">#V1 = sp.sqrt(self.MostraVel()[0]**2 +</span>
                <span class="c">#self.MostraVel()[1]**2)</span>
        <span class="c">#elif cont == 1:</span>
          <span class="c">#V2 = sp.sqrt(self.MostraVel()[0]**2 +</span>
                <span class="c">#self.MostraVel()[1]**2)</span>
        <span class="c">#elif cont == 2:</span>
          <span class="c">#V3 = sp.sqrt(self.MostraVel()[0]**2 +</span>
                <span class="c">#self.MostraVel()[1]**2)</span>
        <span class="c">#elif cont == 3:</span>
          <span class="c">#V4 = sp.sqrt(self.MostraVel()[0]**2 +</span>
                <span class="c">#self.MostraVel()[1]**2)</span>
        <span class="c">#else:</span>
          <span class="c">#V1 = V2</span>
          <span class="c">#V2 = V3</span>
          <span class="c">#V3 = V4</span>
          <span class="c">#V4 = sp.sqrt(self.MostraVel()[0]**2 +</span>
                <span class="c">#self.MostraVel()[1]**2)                </span>
        <span class="c">#if log:</span>
          <span class="c">#if stats.tstd((V1, V2, V3, V4))&lt;errosr:</span>
            <span class="c">#dic[&#39;steadytr&#39;] = (sp.sqrt(self.MostraVel()[0]**2 +</span>
                        <span class="c">#self.MostraVel()[1]**2) /</span>
                    <span class="c">#self.MostraVel()[5])</span>
            <span class="c">#dados.append(dic.copy())</span>
            <span class="c">#log1= True</span>
          
        <span class="c">#if  not log:</span>
          <span class="c">#if (abs(abs(self.MostraPos()[5] - PosIni[5]) - </span>
              <span class="c">#(sp.pi/2)) &lt;= errotf):</span>
            <span class="c">#errotf = (abs(abs(self.MostraPos()[5] - PosIni[5]) -</span>
                  <span class="c">#(sp.pi/2)))</span>
            <span class="c">#dic[&#39;transfer&#39;] = abs(self.MostraPos()[1] - PosIni[1])</span>
            <span class="c">#dic[&#39;advance&#39;] = abs(self.MostraPos()[0] - PosIni[0])</span>
          <span class="c">#if (abs(abs(self.MostraPos()[5] - PosIni[5]) - sp.pi) &lt;=</span>
            <span class="c">#errotd):</span>
            <span class="c">#errotd = abs(abs(self.MostraPos()[5] - PosIni[5]) -</span>
                  <span class="c">#sp.pi)</span>
            <span class="c">#dic[&#39;taticalDiameter&#39;] = abs(self.MostraPos()[1] -</span>
                          <span class="c">#PosIni[1])</span>
          <span class="c">#if abs(self.MostraPos()[5] - PosIni[5]) &gt; sp.pi:</span>
            <span class="c">#log = True</span>


<span class="c">####################################</span>
      <span class="c">#ft = self.VetF(par) </span>
<span class="c">####################################</span>
<span class="c">###</span>
<span class="c">###                inc = Velocidades Lineares no Sistema Inecial</span>
<span class="c">###</span>
<span class="c">####################################</span>
      <span class="c">#MatRot = self.MatRot()</span>
      
      <span class="c">#VelIn = sp.array(MatRot*self.MostraVel()[0:3])</span>

      <span class="c">#PosIne = self.MostraPos()[0:3]</span>


<span class="c">###################################</span>
<span class="c">###                </span>
<span class="c">###                       Guardando os parâmetros</span>
<span class="c">###                </span>
<span class="c">###################################                </span>
<span class="c">##          Velocidade Inercial</span>
      <span class="c">#if saida == &#39;txt&#39;:</span>
        <span class="c">#veloInerHis.write(&#39;%.2f&#39;.rjust(5)%(tp) + &#39; &#39;)</span>
        <span class="c">#for arg in VelIn:</span>
          <span class="c">#veloInerHis.write(&#39;%.5e&#39;.rjust(11)%(arg) + &#39; &#39;)</span>
        <span class="c">#veloInerHis.write(&#39;\n&#39;)</span>
      <span class="c">#elif saida == &#39;mem&#39;:</span>
        <span class="c">#d = sp.hstack(VelIn)</span>
        <span class="c">#veloInerHis[cont, 1:] = d #</span>
        <span class="c">#veloInerHis[cont, 0] = tp #</span>
<span class="c">##           Histórico Leme</span>
      <span class="c">#if saida == &#39;txt&#39;:</span>
        <span class="c">#lemeHis.write(&#39;%.2f&#39;.rjust(5)%(tp) + &#39; &#39;)</span>
        <span class="c">#lemeHis.write(&#39;%.2f&#39;.rjust(5)%(self.MostraLeme()) + &#39;\n&#39;)</span>
      <span class="c">#elif saida == &#39;mem&#39;:</span>
        <span class="c">#lemeHis[cont, 0] = tp</span>
        <span class="c">#lemeHis[cont, 1] = self.MostraLeme()</span>
<span class="c">##           Histórico da posição</span>
      <span class="c">#if saida == &#39;txt&#39;:</span>
        <span class="c">#posHis.write(&#39;%.2f&#39;.rjust(5)%(tp) + &#39; &#39;)</span>
        <span class="c">#for arg in self.MostraPos():</span>
          <span class="c">#posHis.write(&#39;%.5e&#39;.rjust(11)%(arg) + &#39; &#39;)</span>
        <span class="c">#posHis.write(&#39;\n&#39;)</span>
      <span class="c">#elif saida == &#39;mem&#39;:            </span>
        <span class="c">#temp = sp.hstack(self.MostraPos())</span>
        <span class="c">#posHis[cont, :] = sp.hstack((tp, temp))</span>
        <span class="c">#del temp</span>
<span class="c">##           Histórico da Velocidade</span>
      <span class="c">#if saida == &#39;txt&#39;:</span>
        <span class="c">#veloHis.write(&#39;%.2f&#39;.rjust(5)%(tp) + &#39; &#39;)</span>
        <span class="c">#for arg in self.MostraVel():</span>
          <span class="c">#veloHis.write(&#39;%.5e&#39;.rjust(11)%(arg) + &#39; &#39;)</span>
        <span class="c">#veloHis.write(&#39;\n&#39;)</span>
      <span class="c">#elif saida == &#39;mem&#39;: </span>
        <span class="c">#temp = sp.hstack(self.MostraVel())</span>
        <span class="c">#veloHis[cont, :] = sp.hstack((tp, temp))</span>
        <span class="c">#del temp</span>
<span class="c">##           Histórico das Forças </span>
      <span class="c">#if saida == &#39;txt&#39;:</span>
        <span class="c">#temp = sp.zeros((4, 1))</span>
        <span class="c">#if GrausDeLib == 4:</span>
          <span class="c">#temp= ft</span>
        <span class="c">#elif GrausDeLib == 3:</span>
          <span class="c">#temp[:2]  = ft[:2]</span>
          <span class="c">#temp[3]  = ft[2]</span>
        <span class="c">#fHis.write(&#39;%.2f&#39;.rjust(5)%(tp) + &#39; &#39;)</span>
        <span class="c">#for arg in temp:</span>
          <span class="c">#fHis.write(&#39;%.5e&#39;.rjust(11)%(arg) + &#39; &#39;)</span>
        <span class="c">#fHis.write(&#39;\n&#39;)</span>
      <span class="c">#elif saida == &#39;mem&#39;: </span>
        <span class="c">#temp = sp.hstack(sp.array(ft))</span>
        <span class="c">#if GrausDeLib == 4:</span>
          <span class="c">#fHis[cont, :] = sp.hstack((tp, temp))</span>
        <span class="c">#elif GrausDeLib == 3:</span>
          <span class="c">#fHis[cont, :3] = sp.hstack((tp, temp[:2]))</span>
          <span class="c">#fHis[cont, 4] = temp[2]</span>

<span class="c">##           Histórico Propulsor</span>
      <span class="c">#if saida == &#39;txt&#39;:</span>
        <span class="c">#propHis.write(&#39;%.2f&#39;.rjust(5)%(tp) + &#39; &#39;)</span>
        <span class="c">#propHis.write(&#39;%.2f&#39;.rjust(5)%self.MostraRot() + &#39;\n&#39;)</span>
      <span class="c">#elif saida == &#39;mem&#39;:</span>
        <span class="c">#propHis[cont, :] = sp.hstack((tp, self.MostraRot()))</span>
<span class="c">##           Histórico Eta</span>
      <span class="c">#if saida == &#39;txt&#39;:</span>
        <span class="c">#EtaHis.write(&#39;%.2f&#39;.rjust(5)%(tp) + &#39; &#39;)</span>
        <span class="c">#if Eta == &#39;rot&#39;:</span>
          <span class="c">#EtaHis.write(&#39;%.2f&#39;.rjust(5) % (self.MostraRotCom() /</span>
                <span class="c">#self.MostraRot()) + &#39;\n&#39;)</span>
        <span class="c">#elif Eta == &#39;vel&#39;:</span>
          <span class="c">#EtaHis.write(&#39;%.2f&#39;.rjust(5) %</span>
                <span class="c">#(self.MostraVelCom() / self.MostraVel()[0])</span>
<span class="c">#+</span>
                <span class="c">#&#39;\n&#39;)</span>
      <span class="c">#elif saida == &#39;mem&#39;:</span>
        <span class="c">#if Eta== &#39;rot&#39;:</span>
          <span class="c">#EtaHis[cont, :] = sp.hstack((tp, self.MostraRotCom() /</span>
          <span class="c">#self.MostraRot()))</span>
        <span class="c">#elif Eta == &#39;vel&#39;:</span>
          <span class="c">#EtaHis[cont, :] = sp.hstack((tp, </span>
                        <span class="c">#self.MostraVelCom() /</span>
                        <span class="c">#self.MostraVel()[0]))</span>

<span class="c">##           Histórico Beta</span>
      <span class="c">#if saida == &#39;txt&#39;:</span>
        <span class="c">#betaHis.write(&#39;%.2f&#39;.rjust(5) % (tp) + &#39; &#39;)</span>
        <span class="c">#betaHis.write((&#39;%.2f&#39;.rjust(5) % </span>
              <span class="c">#sp.arctan(-self.MostraVel()[1] /</span>
              <span class="c">#self.MostraVel()[0])) + &#39;\n&#39;)</span>
        
      <span class="c">#elif saida == &#39;mem&#39;:</span>
        <span class="c">#betaHis[cont, :] = sp.hstack((tp,</span>
                      <span class="c">#sp.arctan(-self.MostraVel()[1]</span>
<span class="c">#/</span>
                      <span class="c">#self.MostraVel()[0])))</span>

<span class="c">##           Histórico das Acelerações </span>
      <span class="c">#Acel = self.f2(ft, self.H(GrausDeLib))</span>
      <span class="c">#vetor = sp.zeros((6, 1))</span>
      <span class="c">#if GrausDeLib == 4:</span>
        <span class="c">#vetor[:2] = Acel[:2]</span>
        <span class="c">#vetor[3] = Acel[2]</span>
        <span class="c">#vetor [5] = Acel[3]</span>
      <span class="c">#elif GrausDeLib == 3:</span>
        <span class="c">#vetor[:2] = Acel[:2]</span>
        <span class="c">#vetor [5] = Acel[2]</span>
      <span class="c">#if saida == &#39;txt&#39;:</span>
        <span class="c">#acelHis.write(&#39;%.2f&#39;.rjust(5)%(tp) + &#39; &#39;)</span>
        <span class="c">#for arg in vetor:</span>
          <span class="c">#acelHis.write(&#39;%.5e&#39;.rjust(11)%(arg[0]) + &#39; &#39;)</span>
        <span class="c">#acelHis.write(&#39;\n&#39;)</span>
      <span class="c">#elif saida == &#39;mem&#39;:  </span>
        <span class="c">#acelHis[cont, :] = sp.hstack((tp, sp.hstack(vetor)))       </span>

  
  
        <span class="c">#del temp </span>
<span class="c">###############################</span>
<span class="c">##</span>
<span class="c">##    Criação de vetor de graus de liberdade</span>
<span class="c">##</span>
<span class="c">###############################</span>
      <span class="c">#if GrausDeLib == 4:</span>
        <span class="c">#vt = sp.zeros([6, 1])</span>
        
        <span class="c">#vt [0] = self.MostraVel()[0]</span>
        <span class="c">#vt [1] = self.MostraVel()[1]</span>
        <span class="c">#vt [2] = self.MostraVel()[3]</span>
        <span class="c">#vt [3] = self.MostraVel()[5]</span>
        <span class="c">#vt [4] = self.MostraPos()[3]</span>
        <span class="c">#vt [5] = self.MostraPos()[5]</span>
      <span class="c">#elif  GrausDeLib == 3:</span>
        <span class="c">#vt = sp.zeros([4, 1])</span>
        <span class="c">#vt [0] = self.MostraVel()[0]</span>
        <span class="c">#vt [1] = self.MostraVel()[1]</span>
        <span class="c">#vt [2] = self.MostraVel()[5]</span>
        <span class="c">#vt [3] = self.MostraPos()[5]         </span>
<span class="c">###################################</span>
<span class="c">###                </span>
<span class="c">###                      Integração da Aceleração solidária</span>
<span class="c">###                </span>
<span class="c">###################################</span>
      <span class="c">#if met == &#39;euler&#39;:</span>
        <span class="c">#vt =  self.integrador.euler(self.f, vt, tp, dt ,par  )</span>
      <span class="c">#elif met ==&#39;rk4&#39;:</span>
        <span class="c">#vt = self.integrador.rk4(self.f, vt, tp, dt, par)</span>
      
<span class="c">###################################</span>
      <span class="c">#if GrausDeLib == 4:</span>
        <span class="c">#v = sp.zeros((6, 1))</span>
        <span class="c">#v[0] = vt[0] </span>
        <span class="c">#v[1] = vt[1] </span>
        <span class="c">#v[3] = vt[2]</span>
        <span class="c">#v[5] = vt[3]</span>
      <span class="c">#elif GrausDeLib == 3:</span>
        <span class="c">#v = sp.zeros((6, 1))</span>
        <span class="c">#v[0] = vt[0] </span>
        <span class="c">#v[1] = vt[1] </span>
        <span class="c">#v[5] = vt[2]                </span>
      <span class="c">#self.MudaVel(v)               </span>

      <span class="c">#del v</span>
<span class="c">###################################</span>
<span class="c">###                </span>
<span class="c">###                       Integração da velocidade inercial</span>
<span class="c">###                </span>
<span class="c">####################################</span>
      <span class="c">#x = sp.zeros((6, 1))</span>
      <span class="c">#if met == &#39;euler&#39;:</span>
        <span class="c">#x[:3] = self.integrador.euler(self.fvein ,</span>
                      <span class="c">#self.MostraPos()[:3], tp, dt ,</span>
                      <span class="c">#(self.MostraPos()[3:] ,</span>
                      <span class="c">#self.MostraVel()[:3])) </span>
      <span class="c">#elif met == &#39;rk4&#39;:</span>
        <span class="c">#x[:3] = self.integrador.rk4(self.fvein, self.MostraPos()[:3],</span>
                      <span class="c">#tp, dt, (self.MostraPos()[3:],</span>
                      <span class="c">#self.MostraVel()[:3]))</span>
<span class="c">###################################</span>
      <span class="c">#if GrausDeLib == 4:</span>
        <span class="c">#x[3] = vt[4]</span>
        <span class="c">#x[5] = vt[5]</span>
      <span class="c">#elif GrausDeLib == 3:</span>
        <span class="c">#x[5] = vt[3]</span>
        
      <span class="c">#self.MudaPos(x)</span>
      
      <span class="c">#del x</span>
      <span class="c">#cont += 1</span>
      <span class="c">#self.prop.MudaRot(tp)</span>
      <span class="c">#self.leme.MudaLeme(tp)</span>
    <span class="c">#if saida == &#39;txt&#39;:</span>
      <span class="c">#arq = [veloHis, posHis, acelHis, fHis, veloInerHis, lemeHis,</span>
        <span class="c">#propHis, EtaHis]</span>
      <span class="c">#for arg in arq:</span>
        <span class="c">#arg.close()</span>
      <span class="c">#return dados</span>
    <span class="c">#elif saida == &#39;mem&#39;:</span>
      <span class="c">#return (veloHis, posHis, acelHis, fHis, veloInerHis, lemeHis,</span>
          <span class="c">#propHis, EtaHis, dados, betaHis)</span>

  <span class="c">#def getCurvaZigZag(self, peso=None, met=&#39;euler&#39;, t0=0., dt=0.5, t=100.,</span>
                      <span class="c">#GrausDeLib=3, tipo=&#39;port&#39;, leme=sp.array(20.),</span>
                      <span class="c">#RotCom=None, VelCom=None, Vel=None,</span>
                      <span class="c">#proa=sp.array([20.]), Eta=&#39;vel&#39;, </span>
                      <span class="c">#PosIne=sp.array([[0.],[0.],[0.], [0.], [0.], [0.]]),</span>
                      <span class="c">#osa=sp.array(0.0), ospath=sp.array(0.0),</span>
                      <span class="c">#erro=sp.array(0.005),saida=&#39;txt&#39;):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Simulador de manobras padrão</span>
    <span class="c">#_________________________</span>
    <span class="c">#Variáveis de entrada:</span>
    
    <span class="c">#GrausDeLib (integer)-- Graus de liberdade;        </span>
    <span class="c">#met -- Método de integração. Default- Euler;</span>
    <span class="c">#t0 -- Tempo inicial;</span>
    <span class="c">#dt -- Passo no tempo;</span>
    <span class="c">#t -- Tempo final </span>
    <span class="c">#tipo - tipo de manobra simulada. Zig-Zag10/10 e Curva_de_Giro_port</span>
<span class="c">#ou</span>
<span class="c">#Curva_de_Giro_starboard . Default -Zig-Zag</span>
    
    <span class="c">#__________________________</span>
    <span class="c">#Saída:</span>
    
    <span class="c">#Tupla de sp.array</span>
    
    <span class="c">#(veloHis, posHis, acelHis, fHis, veloInerHis, lemeHis)</span>
    
    <span class="c">#Em cada elemento da tupla:</span>
    <span class="c">#A primeira coluna é o passo de tempo e as demais são as variáveis</span>
    
    <span class="c">#veloHis -- histórico de velocidades;</span>
    <span class="c">#posHis -- histórico de posições</span>
    <span class="c">#acelHis --- histórico de acelerações</span>
    <span class="c">#fHis -- histórico de forças </span>
    <span class="c">#veloInerHis -- histórico de velocidades no sistema inercial</span>
    <span class="c">#lemeHis -- histórico do comando de leme</span>
    <span class="c">#&quot;&quot;&quot;</span>

    <span class="c">#if RotCom == None:</span>
      <span class="c">#RotCom = self.dic[&#39;rotnom&#39;]</span>
    <span class="c">#if VelCom == None:</span>
      <span class="c">#VelCom = self.dic[&#39;unom&#39;]</span>
    <span class="c">#if Vel ==  None:</span>
      <span class="c">#Vel = sp.array([[self.dic[&#39;unom&#39;]], [0.], [0.], [0.], [0.], [0.]</span>
              <span class="c">#])</span>
    
    <span class="c">#self.MudaPos( PosIne)</span>
    <span class="c">#self.MudaVel(Vel)</span>
    <span class="c">#self.MudaRotCom(RotCom)</span>
    <span class="c">#self.MudaVelCom(VelCom)</span>


    <span class="c">#if tipo == &#39;port&#39;:</span>
      <span class="c">#self.MudaLemeCom(sp.array(leme*sp.pi/180))</span>
      <span class="c">#exe=0</span>
    <span class="c">#elif tipo == &#39;starboard&#39;:</span>
      <span class="c">#self.MudaLemeCom(sp.array(-leme*sp.pi/180))</span>
      <span class="c">#exe=1</span>

    
<span class="c">##</span>
<span class="c">##   Criando espaço na memória para armazenar os parâmetros da curva</span>
<span class="c">##</span>
<span class="c">##Número de linhas das colunas a seremcriadas</span>
    <span class="c">#nlin = len(sp.arange(t0, t, dt)) </span>

    <span class="c">#if saida == &#39;mem&#39;:</span>
      <span class="c">#lemeHis = sp.zeros((nlin, 2)) #historico do leme</span>
      <span class="c">#veloHis = sp.zeros((nlin, 7)) #histórico da velocidade</span>
      <span class="c">#veloInerHis = sp.zeros((nlin, 4))#histórico da velocidade no</span>
<span class="c">##sistema inercial Verificar depois a necessidade</span>
      <span class="c">#posHis =  sp.zeros([nlin, 7]) #histórico da posição no sistema</span>
<span class="c">##inercial</span>
      <span class="c">#fHis     = sp.zeros((nlin, 5)) #histórico de forças</span>
      <span class="c">#acelHis = sp.zeros((nlin, 7)) #histórico de acelerações</span>
      <span class="c">#propHis = sp.zeros((nlin, 2)) #histórico Máquina</span>
      <span class="c">#EtaHis = sp.zeros((nlin, 2)) #histórico Eta</span>
    <span class="c">#elif saida == &#39;txt&#39;:</span>
      <span class="c">#os.makedirs(&#39;./saida/ZigZag&#39;)</span>
      <span class="c">#os.chdir(&#39;./saida/ZigZag&#39;)</span>
      <span class="c">#lemeHis = open(&#39;leme.dat&#39;, &#39;w&#39;)#historico do leme</span>
      <span class="c">#lemeHis.write(&#39;#Navio &#39; + self.nome + &#39;\n&#39; +  &#39;#Manobra de Curva \</span>
            <span class="c">#de Zig-Zag\n#\n&#39;)</span>
      <span class="c">#lemeHis.write(&#39;#Valor do leme em rad\n&#39;)</span>
      <span class="c">#lemeHis.write(&#39;#temp&#39;.center(5) + &#39; &#39; + &#39;leme&#39;.rjust(8) + &#39; &#39; +</span>
            <span class="c">#&#39;\n&#39;)</span>
      
      <span class="c">#veloHis = open(&#39;velo.dat&#39;, &#39;w&#39;) #histórico da velocidade</span>
      <span class="c">#veloHis.write(&#39;#Navio &#39; + self.nome + &#39;\n&#39; +  &#39;#Manobra de Curva \</span>
            <span class="c">#de Zig-Zag\n#\n&#39;)</span>
      <span class="c">#veloHis.write(&#39;#Velocidade Sistema Solidário \n#\n&#39;)</span>
      <span class="c">#veloHis.write(&#39;#temp&#39;.center(5) + &#39; &#39; + &#39;u&#39;.rjust(11)  + &#39; &#39; +</span>
              <span class="c">#&#39;v&#39;.rjust(11)  + &#39; &#39; + &#39;w&#39;.rjust(11)  + &#39; &#39; + &#39;dot \</span>
              <span class="c">#roll&#39;.rjust(11) + &#39; &#39; + &#39; dot pitch&#39;.rjust(11)  + </span>
              <span class="c">#&#39; &#39; + &#39;dot yaw&#39;.rjust(11) + &#39; &#39; + &#39;\n&#39;) </span>
      
      <span class="c">#veloInerHis = open(&#39;veloiner.dat&#39;, &#39;w&#39;)#histórico da velocidade no</span>
<span class="c">##sistema inercial Verificar depois a necessidade</span>
      <span class="c">#veloInerHis.write(&#39;#Navio &#39; + self.nome + &#39;\n&#39; +  &#39;#Manobra de \</span>
              <span class="c">#Curva de Zig-Zag\n#\n&#39;)</span>
      <span class="c">#veloInerHis.write(&#39;#Velocidade Inercial\n#\n&#39;)</span>
      <span class="c">#veloInerHis.write(&#39;#temp&#39;.center(5) + &#39; &#39; + &#39;u&#39;.rjust(11)  + &#39; &#39; +</span>
              <span class="c">#&#39;v&#39;.rjust(11)  + &#39; &#39;  + &#39;r&#39;.rjust(11) + &#39;\n&#39;) </span>

      <span class="c">#posHis =  open(&#39;pos.dat&#39;, &#39;w&#39;)#histórico da posição no sistema</span>
<span class="c">##inercial</span>
      <span class="c">#posHis.write(&#39;#Navio &#39; + self.nome + &#39;\n&#39; +  &#39;#Manobra de Curva \</span>
            <span class="c">#de Zig-Zag\n#\n&#39;)</span>
      <span class="c">#posHis.write(&#39;#Posição e Orientação\n#\n&#39;)</span>
      <span class="c">#posHis.write(&#39;#temp&#39;.center(5) + &#39; &#39; + &#39;x&#39;.rjust(11)  + &#39; &#39; +</span>
            <span class="c">#&#39;y&#39;.rjust(11)  + &#39; &#39; + &#39;z&#39;.rjust(11)  + &#39; &#39; +</span>
            <span class="c">#&#39;roll&#39;.rjust(11) + &#39; &#39; + &#39;pitch&#39;.rjust(11)  + &#39; &#39; +</span>
            <span class="c">#&#39;yaw&#39;.rjust(11) + &#39; &#39; + &#39;\n&#39;) </span>

      <span class="c">#fHis = open(&#39;forcas.dat&#39;, &#39;w&#39;) #histórico de forças</span>
      <span class="c">#fHis.write(&#39;#Navio &#39; + self.nome + &#39;\n&#39; + &#39;#Manobra de Curva de \</span>
            <span class="c">#Zig-Zag\n#\n&#39;)</span>
      <span class="c">#fHis.write(&#39;#Forças e Momentos\n#\n&#39;)</span>
      <span class="c">#fHis.write(&#39;#temp&#39;.center(5) + &#39; &#39; + &#39;X&#39;.rjust(11)  + &#39; &#39; +</span>
          <span class="c">#&#39;Y&#39;.rjust(11)  + &#39; &#39; + &#39;K&#39;.rjust(11)  + &#39; &#39; +</span>
          <span class="c">#&#39;N&#39;.rjust(11) + &#39; &#39; + &#39;\n&#39;) </span>
      
      <span class="c">#acelHis = open(&#39;acel.dat&#39;, &#39;w&#39;) #histórico de acelerações</span>
      <span class="c">#acelHis.write(&#39;#Navio &#39; + self.nome + &#39;\n&#39; + &#39;#Manobra de Curva \</span>
            <span class="c">#de Zig-Zag\n#\n&#39;)</span>
      <span class="c">#acelHis.write(&#39;#Aceleração\n#\n&#39;)</span>
      <span class="c">#acelHis.write(&#39;#temp&#39;.center(5) + &#39; &#39; + &#39;u&#39;.rjust(11)  + &#39; &#39; +</span>
            <span class="c">#&#39;v&#39;.rjust(11)  + &#39; &#39; + &#39;w&#39;.rjust(11)  + &#39; &#39; +</span>
            <span class="c">#&#39;ddotroll&#39;.rjust(11) + &#39; &#39; + &#39; ddotpitch&#39;.rjust(11)</span>
            <span class="c">#+ &#39; &#39; + &#39;ddotyaw&#39;.rjust(11)  + &#39; &#39; + &#39;\n&#39;) </span>

      <span class="c">#propHis = open(&#39;propulsor.dat&#39;, &#39;w&#39;) #histórico Máquina</span>
      <span class="c">#propHis.write(&#39;#Navio &#39; + self.nome + &#39;\n&#39; + &#39;#Manobra de Curva \</span>
            <span class="c">#de Zig-Zag\n#\n&#39;)</span>
      <span class="c">#propHis.write(&#39;#Rotações do propulsor\n#\n&#39;)</span>
      <span class="c">#propHis.write(&#39;#temp&#39;.center(5) + &#39; &#39; + &#39;rot&#39;.rjust(8) + &#39;\n&#39;)</span>
      
      <span class="c">#EtaHis = open(&#39;Eta.dat&#39;, &#39;w&#39;) #histórico Eta</span>
      <span class="c">#EtaHis.write(&#39;#Navio &#39; + self.nome + &#39;\n&#39; +  &#39;#Manobra de Curva \</span>
            <span class="c">#de Zig-Zag\n#\n&#39;)</span>
      <span class="c">#EtaHis.write(&#39;#Eta \n#\n&#39;)</span>
      <span class="c">#EtaHis.write(&#39;#temp&#39;.center(5) + &#39; &#39; + &#39;rot&#39;.rjust(8) + &#39; &#39; + </span>
            <span class="c">#&#39;\n&#39;)</span>
      
      <span class="c">#os.chdir(&#39;..&#39;)</span>
      <span class="c">#os.chdir(&#39;..&#39;)</span>
      
    <span class="c">#dados = []</span>
    <span class="c">#dic = {}</span>
    <span class="c">#PosIni = self.MostraPos().copy()           </span>

    <span class="c">#del nlin #não preciso mais</span>
    <span class="c">#cont =0 #Contador</span>
    
    <span class="c">#if peso == None:   </span>
      <span class="c">#par =   (GrausDeLib, )</span>
    <span class="c">#else:</span>
      <span class="c">#par = (GrausDeLib, peso)</span>
    

<span class="c">##</span>
<span class="c">##   Iteração</span>
<span class="c">##</span>

    <span class="c">#for tp in sp.arange(t0, t, dt):</span>

<span class="c">################################</span>
<span class="c">###</span>
<span class="c">###   Verificando o momento em que será realizada a mudança do leme</span>
<span class="c">###</span>
<span class="c">################################</span>
      <span class="c">#if (((exe%2 == 0) and self.MostraPos()[5] &lt;= </span>
        <span class="c">#-(proa * sp.pi / 180)) or (exe%2 != 0 and </span>
        <span class="c">#self.MostraPos()[5] &gt;= (proa * sp.pi / 180))):</span>
          <span class="c">#self.MudaLemeCom(self.MostraLeme() * (-1))</span>
          <span class="c">#if ((exe != 0 and tipo == &#39;port&#39;) or (exe != 1</span>
            <span class="c">#and tipo == &#39;starboard&#39;)):</span>
              <span class="c">#dic[&#39;reach&#39;] = erro</span>
              <span class="c">#dic[&#39;ospath&#39;] = ospath</span>
              <span class="c">#dic[&#39;osangle&#39;] = osa</span>
              <span class="c">#dados.append(dic.copy())</span>
        
          <span class="c">#osa = sp.array(0.0)</span>
          <span class="c">#ospath = sp.array(0)</span>
          <span class="c">#erro = sp.array(0.05)</span>
          <span class="c">#logospath = False</span>
          <span class="c">#logosa = False</span>
          <span class="c">#exe += 1</span>
          <span class="c">#if tipo ==&#39;port&#39;:</span>
            <span class="c">#dic[&#39;exeNummber&#39;] = exe</span>
          <span class="c">#elif tipo==&#39;starboard&#39;:</span>
            <span class="c">#dic[&#39;exeNummber&#39;] = exe - 1</span>
          <span class="c">#dic[&#39;time&#39;] = tp - sp.array(dt)</span>
          <span class="c">#dic[&#39;path&#39;] = self.MostraPos()[1]</span>
          <span class="c">#dic[&#39;proa&#39;] = self.MostraPos()[5]</span>

<span class="c">################################</span>
<span class="c">###</span>
<span class="c">###   Atualizando os parâmetros</span>
<span class="c">###</span>
<span class="c">################################</span>
      
      <span class="c">#if ((exe!=0 and tipo == &#39;port&#39;) or (exe!=1 and tipo ==</span>
        <span class="c">#&#39;starboard&#39;)):</span>
        <span class="c">#if ((logospath == False) and</span>
          <span class="c">#(abs(self.MostraPos()[1] - dic[&#39;path&#39;]) &gt;= ospath)):</span>
<span class="c">##(sp.sign(self.MostraPos()[1])== sp.sign(dic[&#39;path&#39;])) and</span>
          <span class="c">#ospath = abs(self.MostraPos()[1] - dic[&#39;path&#39;])</span>
        <span class="c">#else:</span>
          <span class="c">#logospath = True</span>
        
        <span class="c">#if ((logosa == False) and (abs(self.MostraPos()[5] - </span>
          <span class="c">#dic[&#39;proa&#39;]) &gt;= osa)): #(sp.sign(self.MostraPos()[5])==</span>
<span class="c">##sp.sign(dic[&#39;proa&#39;])) and </span>
          <span class="c">#osa = abs(self.MostraPos()[5] - dic[&#39;proa&#39;])</span>
        <span class="c">#else:</span>
          <span class="c">#logosa = True</span>
          
        <span class="c">#if abs(abs(self.MostraPos()[5]) - abs(PosIni[5])) &lt; erro:</span>
          <span class="c">#erro = abs(self.MostraPos()[5] - PosIni[5])            </span>

      
  
      
      
<span class="c">##</span>
<span class="c">##                inc = Velocidades Lineares no Sistema Inecial</span>
<span class="c">##</span>
      <span class="c">#MatRot = self.MatRot()</span>
      <span class="c">#VelIn = MatRot * sp.matrix(self.vel[0:3])</span>

      <span class="c">#PosIne = self.MostraPos()[0:3]</span>

<span class="c">####################################</span>

<span class="c">##################################</span>
<span class="c">###</span>
<span class="c">###  Cálculo das forças de Maneira Modular</span>
<span class="c">###</span>
<span class="c">####################################</span>
      <span class="c">#ft = self.VetF(par)</span>

<span class="c">###################################</span>
<span class="c">###################################</span>
<span class="c">###                </span>
<span class="c">###                       Guardando os parâmetros</span>
<span class="c">###                </span>
<span class="c">###################################                </span>
<span class="c">##          Velocidade Inercial</span>
      <span class="c">#if saida == &#39;txt&#39;:</span>
        <span class="c">#veloInerHis.write(&#39;%.2f&#39;.rjust(5)%(tp) + &#39; &#39;)</span>
        <span class="c">#for arg in VelIn:</span>
          <span class="c">#veloInerHis.write(&#39;%.5e&#39;.rjust(11)%(arg) + &#39; &#39;)</span>
        <span class="c">#veloInerHis.write(&#39;\n&#39;)</span>
      <span class="c">#elif saida == &#39;mem&#39;:</span>
        <span class="c">#d = sp.hstack(VelIn)</span>
        <span class="c">#veloInerHis[cont, 1:] = d #</span>
        <span class="c">#veloInerHis[cont, 0] = tp #</span>
<span class="c">##           Histórico Leme</span>
      <span class="c">#if saida == &#39;txt&#39;:</span>
        <span class="c">#lemeHis.write(&#39;%.2f&#39;.rjust(5)%(tp) + &#39; &#39;)</span>
        <span class="c">#lemeHis.write(&#39;%.2f&#39;.rjust(5)%(self.MostraLeme()) + &#39;\n&#39;)</span>
      <span class="c">#elif saida == &#39;mem&#39;:</span>
        <span class="c">#lemeHis[cont, 0] = tp</span>
        <span class="c">#lemeHis[cont, 1] = self.MostraLeme()</span>
<span class="c">##           Histórico da posição</span>
      <span class="c">#if saida == &#39;txt&#39;:</span>
        <span class="c">#posHis.write(&#39;%.2f&#39;.rjust(5)%(tp) + &#39; &#39;)</span>
        <span class="c">#for arg in self.MostraPos():</span>
          <span class="c">#posHis.write(&#39;%.5e&#39;.rjust(11)%(arg) + &#39; &#39;)</span>
        <span class="c">#posHis.write(&#39;\n&#39;)</span>
      <span class="c">#elif saida == &#39;mem&#39;:            </span>
        <span class="c">#temp = sp.hstack(self.MostraPos())</span>
        <span class="c">#posHis[cont, :] = sp.hstack((tp, temp))</span>
        <span class="c">#del temp</span>
<span class="c">##           Histórico da Velocidade</span>
      <span class="c">#if saida == &#39;txt&#39;:</span>
        <span class="c">#veloHis.write(&#39;%.2f&#39;.rjust(5)%(tp) + &#39; &#39;)</span>
        <span class="c">#for arg in self.MostraVel():</span>
          <span class="c">#veloHis.write(&#39;%.5e&#39;.rjust(11)%(arg) + &#39; &#39;)</span>
        <span class="c">#veloHis.write(&#39;\n&#39;)</span>
      <span class="c">#elif saida == &#39;mem&#39;: </span>
        <span class="c">#temp = sp.hstack(self.MostraVel())</span>
        <span class="c">#veloHis[cont, :] = sp.hstack((tp, temp))</span>
        <span class="c">#del temp</span>
<span class="c">##           Histórico das Forças </span>
      <span class="c">#if saida == &#39;txt&#39;:</span>
        <span class="c">#temp = sp.zeros((4, 1))</span>
        <span class="c">#if GrausDeLib == 4:</span>
          <span class="c">#temp = ft</span>
        <span class="c">#elif GrausDeLib == 3:</span>
          <span class="c">#temp[:2] = ft[:2]</span>
          <span class="c">#temp[3] = ft[2]</span>
        <span class="c">#fHis.write(&#39;%.2f&#39;.rjust(5)%(tp) + &#39; &#39;)</span>
        <span class="c">#for arg in temp:</span>
          <span class="c">#fHis.write(&#39;%.5e&#39;.rjust(11)%(arg) + &#39; &#39;)</span>
        <span class="c">#fHis.write(&#39;\n&#39;)</span>
      <span class="c">#elif saida == &#39;mem&#39;: </span>
        <span class="c">#temp = sp.hstack(sp.array(ft))</span>
        <span class="c">#if GrausDeLib == 4:</span>
          <span class="c">#fHis[cont, :] = sp.hstack((tp, temp))</span>
        <span class="c">#elif GrausDeLib == 3:</span>
          <span class="c">#fHis[cont, :3] = sp.hstack((tp, temp[:2]))</span>
          <span class="c">#fHis[cont, 4] = temp[2]</span>

<span class="c">##           Histórico Propulsor</span>
      <span class="c">#if saida == &#39;txt&#39;:</span>
        <span class="c">#propHis.write(&#39;%.2f&#39;.rjust(5)%(tp) + &#39; &#39;)</span>
        <span class="c">#propHis.write(&#39;%.2f&#39;.rjust(5)%self.MostraRot() + &#39;\n&#39;)</span>
      <span class="c">#elif saida == &#39;mem&#39;:</span>
        <span class="c">#propHis[cont, :] = sp.hstack((tp, self.MostraRot()))</span>
<span class="c">##           Histórico Eta</span>
      <span class="c">#if saida == &#39;txt&#39;:</span>
        <span class="c">#EtaHis.write(&#39;%.2f&#39;.rjust(5)%(tp) + &#39; &#39;)</span>
        <span class="c">#if Eta == &#39;rot&#39;:</span>
          <span class="c">#EtaHis.write(&#39;%.2f&#39;.rjust(5) % (self.MostraRotCom() /</span>
                <span class="c">#self.MostraRot()) + &#39;\n&#39;)</span>
        <span class="c">#elif Eta == &#39;vel&#39;:   </span>
          <span class="c">#EtaHis.write(&#39;%.2f&#39;.rjust(5) % (self.MostraVelCom() /</span>
                <span class="c">#self.MostraVel()[0]) + &#39;\n&#39;)</span>
      <span class="c">#elif saida == &#39;mem&#39;:</span>
        <span class="c">#if Eta== &#39;rot&#39;:</span>
          <span class="c">#EtaHis[cont, :] = sp.hstack((tp, self.MostraRotCom() /</span>
                        <span class="c">#self.MostraRot()))</span>
        <span class="c">#elif Eta == &#39;vel&#39;:</span>
          <span class="c">#EtaHis[cont, :] = sp.hstack((tp, self.MostraVelCom() /</span>
                        <span class="c">#self.MostraVel()[0]))</span>

<span class="c">##           Histórico das Acelerações </span>
      <span class="c">#Acel = self.f2(ft, self.H(GrausDeLib))</span>
      <span class="c">#vetor = sp.zeros((6, 1))</span>
      <span class="c">#if GrausDeLib == 4:</span>
        <span class="c">#vetor[:2] = Acel[:2]</span>
        <span class="c">#vetor[3] = Acel[2]</span>
        <span class="c">#vetor [5] = Acel[3]</span>
      <span class="c">#elif GrausDeLib == 3:</span>
        <span class="c">#vetor[:2] = Acel[:2]</span>
        <span class="c">#vetor [5] = Acel[2]</span>
      <span class="c">#if saida == &#39;txt&#39;:</span>
        <span class="c">#acelHis.write(&#39;%.2f&#39;.rjust(5)%(tp) + &#39; &#39;)</span>
        <span class="c">#for arg in vetor:</span>
          <span class="c">#acelHis.write(&#39;%.5e&#39;.rjust(11)%(arg[0]) + &#39; &#39;)</span>
        <span class="c">#acelHis.write(&#39;\n&#39;)</span>
      <span class="c">#elif saida == &#39;mem&#39;:  </span>
        <span class="c">#acelHis[cont, :] = sp.hstack((tp, sp.hstack(vetor)))       </span>

  
      <span class="c">#del vetor </span>

<span class="c">###############################</span>
<span class="c">###</span>
<span class="c">###    Criação de vetor de graus de liberdade</span>
<span class="c">###</span>
<span class="c">###############################</span>
      <span class="c">#if GrausDeLib == 4:</span>
        <span class="c">#vt = sp.zeros([6, 1])</span>
        
        <span class="c">#vt [0] = self.MostraVel()[0]</span>
        <span class="c">#vt [1] = self.MostraVel()[1]</span>
        <span class="c">#vt [2] = self.MostraVel()[3]</span>
        <span class="c">#vt [3] = self.MostraVel()[5]</span>
        <span class="c">#vt [4] = self.MostraPos()[3]</span>
        <span class="c">#vt [5] = self.MostraPos()[5]</span>
      <span class="c">#elif  GrausDeLib == 3:</span>
        <span class="c">#vt = sp.zeros([4, 1])</span>
        <span class="c">#vt [0] = self.MostraVel()[0]</span>
        <span class="c">#vt [1] = self.MostraVel()[1]</span>
        <span class="c">#vt [2] = self.MostraVel()[5]</span>
        <span class="c">#vt [3] = self.MostraPos()[5]         </span>
<span class="c">###################################</span>
<span class="c">###                </span>
<span class="c">###                      Integração da Aceleração solidária</span>
<span class="c">###                </span>
<span class="c">###################################</span>
      <span class="c">#if met == &#39;euler&#39;:</span>
        <span class="c">#vt =  self.integrador.euler(self.f, vt, tp, dt ,par  )</span>
      <span class="c">#elif met ==&#39;rk4&#39;:</span>
        <span class="c">#vt = self.integrador.rk4(self.f, vt, tp, dt, par)</span>
      
<span class="c">###################################</span>
      <span class="c">#if GrausDeLib == 4:</span>
        <span class="c">#v = sp.zeros((6, 1))</span>
        <span class="c">#v[0] = vt[0] </span>
        <span class="c">#v[1] = vt[1] </span>
        <span class="c">#v[3] = vt[2]</span>
        <span class="c">#v[5] = vt[3]</span>
      <span class="c">#elif GrausDeLib ==3:</span>
        <span class="c">#v = sp.zeros((6, 1))</span>
        <span class="c">#v[0] = vt[0] </span>
        <span class="c">#v[1] = vt[1] </span>
        <span class="c">#v[5] = vt[2]                </span>
      <span class="c">#self.MudaVel(v)               </span>

      <span class="c">#del v</span>
<span class="c">###################################</span>
<span class="c">###                </span>
<span class="c">###                       Integração da velocidade inercial</span>
<span class="c">###                </span>
<span class="c">####################################</span>
      <span class="c">#x = sp.zeros((6, 1))</span>
      <span class="c">#if met == &#39;euler&#39;:</span>
        <span class="c">#x[:3] = self.integrador.euler(self.fvein,</span>
<span class="c">#self.MostraPos()[:3],</span>
                      <span class="c">#tp, dt, (self.MostraPos()[3:],</span>
                      <span class="c">#self.MostraVel()[:3]))</span>
      <span class="c">#elif met == &#39;rk4&#39;:</span>
        <span class="c">#x[:3] = self.integrador.rk4(self.fvein,</span>
<span class="c">#self.MostraPos()[:3],</span>
                      <span class="c">#tp, dt, (self.MostraPos()[3:],</span>
                      <span class="c">#self.MostraVel()[:3]))</span>
<span class="c">###################################</span>
      <span class="c">#if GrausDeLib == 4:</span>
        <span class="c">#x[3] = vt[4]</span>
        <span class="c">#x[5] = vt[5]</span>
      <span class="c">#elif GrausDeLib == 3:</span>
        <span class="c">#x[5] = vt[3]</span>
        
      <span class="c">#self.MudaPos(x)</span>
      <span class="c">#cont += 1</span>
      <span class="c">#del x</span>
      
      <span class="c">#self.prop.MudaRot(tp)</span>
      <span class="c">#self.leme.MudaLeme(tp)</span>

    <span class="c">#if saida == &#39;txt&#39;:</span>
      <span class="c">#arq = [veloHis, posHis, acelHis, fHis, veloInerHis, lemeHis,</span>
        <span class="c">#propHis, EtaHis]</span>
      <span class="c">#for arg in arq:</span>
        <span class="c">#arg.close()</span>
      <span class="c">#return dados</span>
    <span class="c">#elif saida == &#39;mem&#39;:</span>
      <span class="c">#return (veloHis, posHis, acelHis, fHis, veloInerHis, lemeHis,</span>
          <span class="c">#propHis, EtaHis, dados)</span>

  <span class="c">#def simulaTestb(self, p, intervalo=sp.array(5.), V= None ):</span>
    <span class="c">#&quot;&quot;&quot;</span>
    <span class="c">#Retorna uma matrix com o valor das forças variando de acordo com</span>
<span class="c">#que</span>
<span class="c">#varia a velocidade </span>
    <span class="c">#u= Vcos(beta) v = Vsen(beta) com beta variando de 0 a 180 graus em</span>
<span class="c">#um</span>
<span class="c">#intervalo = intervalo        </span>
    <span class="c">#&quot;&quot;&quot;</span>
    
    <span class="c">#if V == None:</span>
      <span class="c">#V = self.dic[&#39;unom&#39;]</span>
      
    <span class="c">#Velocidade = sp.zeros((6, 1))</span>
    <span class="c">#saida = sp.zeros([len( sp.arange(0., sp.pi, intervalo * sp.pi /</span>
<span class="c">#180)),</span>
            <span class="c">#5])</span>
    <span class="c">#contlinha = 0</span>
    
    <span class="c">#for beta in sp.arange(0., sp.pi, intervalo * sp.pi / 180):</span>
      <span class="c">#Velocidade[0] = sp.array(V) * sp.cos(beta)</span>
      <span class="c">#Velocidade[1] = -sp.array(V) * sp.sin(beta)</span>
      <span class="c">#self.MudaVelCom(Velocidade[0]) #condição que força \eta=1</span>
      <span class="c">#self.MudaVel(Velocidade)</span>
      <span class="c">#v = sp.sqrt(Velocidade[0] ** 2 + Velocidade[1] ** 2)</span>
      <span class="c">#rho = self.dic[&#39;rho&#39;]</span>
      <span class="c">#lpp = self.dic[&#39;lpp&#39;]</span>
      <span class="c">#vetF = self.VetF((4, p))</span>
<span class="c">##            vetF = sp.hstack(vetF)</span>
      <span class="c">#saida[contlinha, :] = sp.hstack([beta, vetF[0] * (2 / (rho *</span>
<span class="c">#(lpp *</span>
                      <span class="c">#(v ** 2)))), vetF[1] * (2 /</span>
<span class="c">#(rho *</span>
                      <span class="c">#(lpp* (v ** 2)))), vetF[2] *</span>
                      <span class="c">#(2 / (rho * ((lpp * v) ** 2))),</span>
                      <span class="c">#vetF[3] * (2 / (rho * ((lpp * v) **</span>
                      <span class="c">#2)))])</span>
      <span class="c">#contlinha += 1</span>
    
    <span class="c">#return saida</span>

<span class="c">#if __name__ == &#39;__main__&#39;:</span>
  <span class="c">#main()</span>

      <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span> 
        <span class="n">temp</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ft</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
          <span class="n">fHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="n">temp</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
          <span class="n">fHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="n">temp</span><span class="p">[:</span><span class="mi">2</span><span class="p">]))</span>
          <span class="n">fHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

<span class="c">#           Histórico Propulsor</span>
      <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
        <span class="n">propHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="n">propHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraRot</span><span class="p">()</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span>
        <span class="n">propHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraRot</span><span class="p">()))</span>
<span class="c">#           Histórico Eta</span>
      <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
        <span class="n">EtaHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Eta</span> <span class="o">==</span> <span class="s">&#39;rot&#39;</span><span class="p">:</span>
          <span class="n">EtaHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraRotCom</span><span class="p">()</span> <span class="o">/</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">MostraRot</span><span class="p">())</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">Eta</span> <span class="o">==</span> <span class="s">&#39;vel&#39;</span><span class="p">:</span>   
          <span class="n">EtaHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraVelCom</span><span class="p">()</span> <span class="o">/</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">Eta</span><span class="o">==</span> <span class="s">&#39;rot&#39;</span><span class="p">:</span>
          <span class="n">EtaHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraRotCom</span><span class="p">()</span> <span class="o">/</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">MostraRot</span><span class="p">()))</span>
        <span class="k">elif</span> <span class="n">Eta</span> <span class="o">==</span> <span class="s">&#39;vel&#39;</span><span class="p">:</span>
          <span class="n">EtaHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVelCom</span><span class="p">()</span> <span class="o">/</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">]))</span>

<span class="c">#           Histórico das Acelerações </span>
      <span class="n">Acel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f2</span><span class="p">(</span><span class="n">ft</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">H</span><span class="p">(</span><span class="n">GrausDeLib</span><span class="p">))</span>
      <span class="n">vetor</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
      <span class="k">if</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">vetor</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">Acel</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">vetor</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">Acel</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">vetor</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">Acel</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
      <span class="k">elif</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">vetor</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">Acel</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">vetor</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">Acel</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
      <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
        <span class="n">acelHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.2f</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">vetor</span><span class="p">:</span>
          <span class="n">acelHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.5e</span><span class="s">&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">arg</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="n">acelHis</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
      <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span>  
        <span class="n">acelHis</span><span class="p">[</span><span class="n">cont</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">vetor</span><span class="p">)))</span>       

  
      <span class="k">del</span> <span class="n">vetor</span> 

<span class="c">##############################</span>
<span class="c">##</span>
<span class="c">##    Criação de vetor de graus de liberdade</span>
<span class="c">##</span>
<span class="c">##############################</span>
      <span class="k">if</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">vt</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        
        <span class="n">vt</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">vt</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">vt</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">vt</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">vt</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">vt</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
      <span class="k">elif</span>  <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">vt</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="n">vt</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">vt</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">vt</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">vt</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">5</span><span class="p">]</span>         
<span class="c">##################################</span>
<span class="c">##                </span>
<span class="c">##                      Integração da Aceleração solidária</span>
<span class="c">##                </span>
<span class="c">##################################</span>
      <span class="k">if</span> <span class="n">met</span> <span class="o">==</span> <span class="s">&#39;euler&#39;</span><span class="p">:</span>
        <span class="n">vt</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">integrador</span><span class="o">.</span><span class="n">euler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span> <span class="n">vt</span><span class="p">,</span> <span class="n">tp</span><span class="p">,</span> <span class="n">dt</span> <span class="p">,</span><span class="n">par</span>  <span class="p">)</span>
      <span class="k">elif</span> <span class="n">met</span> <span class="o">==</span><span class="s">&#39;rk4&#39;</span><span class="p">:</span>
        <span class="n">vt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">integrador</span><span class="o">.</span><span class="n">rk4</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span> <span class="n">vt</span><span class="p">,</span> <span class="n">tp</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">par</span><span class="p">)</span>
      
<span class="c">##################################</span>
      <span class="k">if</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">vt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> 
        <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">vt</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> 
        <span class="n">v</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">vt</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">v</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">vt</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
      <span class="k">elif</span> <span class="n">GrausDeLib</span> <span class="o">==</span><span class="mi">3</span><span class="p">:</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">vt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> 
        <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">vt</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> 
        <span class="n">v</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">vt</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>                
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaVel</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>               

      <span class="k">del</span> <span class="n">v</span>
<span class="c">##################################</span>
<span class="c">##                </span>
<span class="c">##                       Integração da velocidade inercial</span>
<span class="c">##                </span>
<span class="c">###################################</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
      <span class="k">if</span> <span class="n">met</span> <span class="o">==</span> <span class="s">&#39;euler&#39;</span><span class="p">:</span>
        <span class="n">x</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">integrador</span><span class="o">.</span><span class="n">euler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fvein</span><span class="p">,</span>
<span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[:</span><span class="mi">3</span><span class="p">],</span>
                      <span class="n">tp</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">3</span><span class="p">:],</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[:</span><span class="mi">3</span><span class="p">]))</span>
      <span class="k">elif</span> <span class="n">met</span> <span class="o">==</span> <span class="s">&#39;rk4&#39;</span><span class="p">:</span>
        <span class="n">x</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">integrador</span><span class="o">.</span><span class="n">rk4</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fvein</span><span class="p">,</span>
<span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[:</span><span class="mi">3</span><span class="p">],</span>
                      <span class="n">tp</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MostraPos</span><span class="p">()[</span><span class="mi">3</span><span class="p">:],</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">MostraVel</span><span class="p">()[:</span><span class="mi">3</span><span class="p">]))</span>
<span class="c">##################################</span>
      <span class="k">if</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">vt</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">x</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">vt</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
      <span class="k">elif</span> <span class="n">GrausDeLib</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">x</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">vt</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaPos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
      <span class="n">cont</span> <span class="o">+=</span> <span class="mi">1</span>
      <span class="k">del</span> <span class="n">x</span>
      
      <span class="bp">self</span><span class="o">.</span><span class="n">prop</span><span class="o">.</span><span class="n">MudaRot</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">leme</span><span class="o">.</span><span class="n">MudaLeme</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;txt&#39;</span><span class="p">:</span>
      <span class="n">arq</span> <span class="o">=</span> <span class="p">[</span><span class="n">veloHis</span><span class="p">,</span> <span class="n">posHis</span><span class="p">,</span> <span class="n">acelHis</span><span class="p">,</span> <span class="n">fHis</span><span class="p">,</span> <span class="n">veloInerHis</span><span class="p">,</span> <span class="n">lemeHis</span><span class="p">,</span>
        <span class="n">propHis</span><span class="p">,</span> <span class="n">EtaHis</span><span class="p">]</span>
      <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">arq</span><span class="p">:</span>
        <span class="n">arg</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
      <span class="k">return</span> <span class="n">dados</span>
    <span class="k">elif</span> <span class="n">saida</span> <span class="o">==</span> <span class="s">&#39;mem&#39;</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">(</span><span class="n">veloHis</span><span class="p">,</span> <span class="n">posHis</span><span class="p">,</span> <span class="n">acelHis</span><span class="p">,</span> <span class="n">fHis</span><span class="p">,</span> <span class="n">veloInerHis</span><span class="p">,</span> <span class="n">lemeHis</span><span class="p">,</span>
          <span class="n">propHis</span><span class="p">,</span> <span class="n">EtaHis</span><span class="p">,</span> <span class="n">dados</span><span class="p">)</span>

<div class="viewcode-block" id="navio.simulaTestb"><a class="viewcode-back" href="../Navio.html#Navio.navio.simulaTestb">[documentos]</a>  <span class="k">def</span> <span class="nf">simulaTestb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">intervalo</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mf">5.</span><span class="p">),</span> <span class="n">V</span><span class="o">=</span> <span class="bp">None</span> <span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retorna uma matrix com o valor das forças variando de acordo com</span>
<span class="sd">que</span>
<span class="sd">varia a velocidade </span>
<span class="sd">    u= Vcos(beta) v = Vsen(beta) com beta variando de 0 a 180 graus em</span>
<span class="sd">um</span>
<span class="sd">intervalo = intervalo        </span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">if</span> <span class="n">V</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">V</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;unom&#39;</span><span class="p">]</span>
      
    <span class="n">Velocidade</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">saida</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span> <span class="n">sp</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="n">sp</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">intervalo</span> <span class="o">*</span> <span class="n">sp</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span>
<span class="mi">180</span><span class="p">)),</span>
            <span class="mi">5</span><span class="p">])</span>
    <span class="n">contlinha</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="k">for</span> <span class="n">beta</span> <span class="ow">in</span> <span class="n">sp</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="n">sp</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">intervalo</span> <span class="o">*</span> <span class="n">sp</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span><span class="p">):</span>
      <span class="n">Velocidade</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">V</span><span class="p">)</span> <span class="o">*</span> <span class="n">sp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span>
      <span class="n">Velocidade</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">sp</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">V</span><span class="p">)</span> <span class="o">*</span> <span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaVelCom</span><span class="p">(</span><span class="n">Velocidade</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c">#condição que força \eta=1</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">MudaVel</span><span class="p">(</span><span class="n">Velocidade</span><span class="p">)</span>
      <span class="n">v</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">Velocidade</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">Velocidade</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
      <span class="n">rho</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;rho&#39;</span><span class="p">]</span>
      <span class="n">lpp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic</span><span class="p">[</span><span class="s">&#39;lpp&#39;</span><span class="p">]</span>
      <span class="n">vetF</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">VetF</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="n">p</span><span class="p">))</span>
<span class="c">#            vetF = sp.hstack(vetF)</span>
      <span class="n">saida</span><span class="p">[</span><span class="n">contlinha</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">hstack</span><span class="p">([</span><span class="n">beta</span><span class="p">,</span> <span class="n">vetF</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="n">rho</span> <span class="o">*</span>
<span class="p">(</span><span class="n">lpp</span> <span class="o">*</span>
                      <span class="p">(</span><span class="n">v</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)))),</span> <span class="n">vetF</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">/</span>
<span class="p">(</span><span class="n">rho</span> <span class="o">*</span>
                      <span class="p">(</span><span class="n">lpp</span><span class="o">*</span> <span class="p">(</span><span class="n">v</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)))),</span> <span class="n">vetF</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span>
                      <span class="p">(</span><span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="n">rho</span> <span class="o">*</span> <span class="p">((</span><span class="n">lpp</span> <span class="o">*</span> <span class="n">v</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))),</span>
                      <span class="n">vetF</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="n">rho</span> <span class="o">*</span> <span class="p">((</span><span class="n">lpp</span> <span class="o">*</span> <span class="n">v</span><span class="p">)</span> <span class="o">**</span>
                      <span class="mi">2</span><span class="p">)))])</span>
      <span class="n">contlinha</span> <span class="o">+=</span> <span class="mi">1</span>
    
    <span class="k">return</span> <span class="n">saida</span>
</div></div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
  <span class="k">print</span> <span class="p">(</span><span class="s">&quot;Módulo chamado pelo mesmo módulo&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
  <span class="k">print</span> <span class="p">(</span><span class="s">&quot;Módulo chamado por outro módulo&quot;</span><span class="p">)</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Pesquisa rápida</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Ir" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Digite os termos da busca ou o nome de um módulo, classe ou função.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navegação</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice Geral"
             >índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos do Python"
             >módulos</a> |</li>
        <li><a href="../index.html">NumShip 1 documentation</a> &raquo;</li>
          <li><a href="index.html" >Código do módulo</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Alex S. Oliveira.
      Criado com <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>